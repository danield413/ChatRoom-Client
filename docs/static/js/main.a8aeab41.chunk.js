(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{667:function(e,t,a){},680:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(56),i=a.n(c),r=a(17),o=a(43),l=a(34),d=a(76),u=a.n(d),j=a(207),b=a(100),m=a.n(b),h=a(101),x=a.n(h),O="AUTH checking JWT finish",f="AUTH login",p="AUTH logout",g="AUTH new user",v="DASHBOARD add messages",w="DASHBOARD add chat messages",N="DASHBOARD add users",y="DASHBOARD clean",k="DASHBOARD select user",C="DASHBOARD add all registered users",S="DASHBOARD open sidebar",_="DASHBOARD close sidebar",I="STATS load stats",T="STATS clean stats",A=function(e){return{type:f,payload:e}},E=function(){return{type:g}},B=function(){return{type:O}},D=function(){return{type:p}},M=a(23),R=a(688),U=a(361),z=a(689),H=a(64),F=a(96),q=function(e){return{type:v,payload:e}},P=function(e){return{type:w,payload:e}},L=function(e){return{type:k,payload:e}},G=function(){return{type:S}},V=function(){return{type:_}},J=function(){return{type:y}},K=a(2),W=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})).uid,a=Object(r.c)((function(e){return e.dashboard})).selectedUser,n=Object(r.c)((function(e){return e.dashboard})).users;return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h6",{className:"lead ms-4 my-3 ",children:Object(K.jsx)("strong",{className:"text-light text-resp",children:"Conectados"})}),Object(K.jsxs)("button",{onClick:function(){e(L({})),e(V())},className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat((null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.uid)?"":"user-sidebar-active"),children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"ms-3 mr-10"}),Object(K.jsxs)("span",{className:"fw-bold text-resp",children:["Chat general ",Object(K.jsx)("i",{className:"fas fa-circle mx-2 fz-12px text-online"})]})]}),Object(K.jsx)("div",{className:"w-100 overflow-auto online-height",children:n&&n.map((function(n){return(null===n||void 0===n?void 0:n.id)!==t&&Object(K.jsxs)("button",{onClick:function(){e(L({uid:null===n||void 0===n?void 0:n.id,name:null===n||void 0===n?void 0:n.name})),e(V())},className:"text-resp text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat(n.id===(null===a||void 0===a?void 0:a.uid)?"user-sidebar-active":""),children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"ms-3 mr-10"}),Object(K.jsxs)("span",{className:"fw-bold text-resp",children:[n.name," ",Object(K.jsx)("i",{className:"fas fa-circle mx-2 fz-12px text-online"})]})]},n.id)}))})]})},X=function(){var e=Object(r.c)((function(e){return e.dashboard})).allUsers,t=Object(r.c)((function(e){return e.auth})).uid;return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h5",{className:"lead ms-4 my-3",children:Object(K.jsx)("strong",{className:"text-light text-resp",children:"Todos"})}),Object(K.jsx)("div",{className:"w-100 overflow-auto all-height",children:e&&e.map((function(e){return(null===e||void 0===e?void 0:e.id)!==t&&Object(K.jsxs)("button",{className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar",children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"ms-3 mr-10"}),Object(K.jsx)("span",{className:"fw-bold",children:e.name})]},e.uid)}))})]})},Q=a(72),Y=function(){return{type:T}},Z=function(){var e=Object(n.useState)("online"),t=Object(M.a)(e,2),a=t[0],s=t[1],c=Object(r.b)(),i=Object(r.c)((function(e){return e.auth})),l=i.uid,d=i.name,u=Object(r.c)((function(e){return e.dashboard})).users,j=Object(r.c)((function(e){return e.dashboard})).selectedUser,b=Object(n.useCallback)((function(){u.find((function(e){return e.id===(null===j||void 0===j?void 0:j.uid)}))||c(L({}))}),[u,null===j||void 0===j?void 0:j.uid,c]);Object(n.useEffect)((function(){b()}),[u,b]);return Object(K.jsxs)("aside",{className:"h-100",children:[Object(K.jsx)("header",{children:Object(K.jsxs)("div",{className:"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"ms-3 mr-10"}),Object(K.jsx)("span",{className:"fw-bold text-white",children:d})]}),Object(K.jsxs)(R.a,{title:Object(K.jsx)(F.b,{}),id:"dropdown-item-button",variant:"dark",className:"bg-dark d-inline",children:[Object(K.jsx)(U.a.ItemText,{className:"bg-secondary text-light",children:Object(K.jsx)("strong",{children:"Opciones"})}),Object(K.jsx)(U.a.Item,{as:"button",onClick:function(){c(D()),c(J()),c(Y()),localStorage.removeItem("chat-token")},className:"bg-secondary text-light",children:"Salir"})]})]})}),Object(K.jsx)("p",{className:"text-muted text-center mt-2",children:l}),Object(K.jsx)("div",{className:"w-100 d-flex justify-content-center mb-3",children:Object(K.jsxs)(o.b,{to:"/stats",className:"btn btn-outline-info d-flex align-items-center ",children:[Object(K.jsx)(Q.b,{className:"me-1"}),"Estad\xedsticas"]})}),Object(K.jsxs)("div",{children:[Object(K.jsxs)(z.a,{"aria-label":"selecci\xf3n",className:"w-100",children:[Object(K.jsx)("button",{onClick:function(){return s("online")},className:"button-group w-50 text-resp ".concat("online"===a&&"button-group-active"," fw-bold text-white"),children:"Conectados"}),Object(K.jsx)("button",{onClick:function(){return s("all")},className:"button-group w-50 text-resp ".concat("all"===a&&"button-group-active"," fw-bold text-white"),children:"Todos"})]}),"online"===a?Object(K.jsx)(W,{}):Object(K.jsx)(X,{})]})]})},$=a(331),ee=a(699),te=function(){var e=Object(n.useState)("online"),t=Object(M.a)(e,2),a=t[0],s=t[1],c=Object(r.b)(),i=Object(r.c)((function(e){return e.auth})),l=i.uid,d=i.name,u=Object(r.c)((function(e){return e.dashboard})).users,j=Object(r.c)((function(e){return e.dashboard})).selectedUser,b=Object(n.useCallback)((function(){u.find((function(e){return e.id===(null===j||void 0===j?void 0:j.uid)}))||c(L({}))}),[u,null===j||void 0===j?void 0:j.uid,c]);Object(n.useEffect)((function(){b()}),[u,b]);return Object(K.jsxs)("aside",{className:"h-100",children:[Object(K.jsx)("header",{children:Object(K.jsxs)("div",{className:"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"ms-3 mr-10"}),Object(K.jsx)("span",{className:"fw-bold text-white text-resp",children:d})]}),Object(K.jsxs)("div",{children:[Object(K.jsxs)(R.a,{title:Object(K.jsx)(F.b,{}),id:"dropdown-item-button",variant:"dark",className:"bg-dark d-inline",children:[Object(K.jsx)(U.a.ItemText,{className:"bg-secondary text-light text-resp",children:Object(K.jsx)("strong",{children:"Opciones"})}),Object(K.jsx)(U.a.Item,{as:"button",onClick:function(){c(D()),c(J()),c(Y()),localStorage.removeItem("chat-token")},className:"bg-secondary text-light text-resp",children:"Salir"})]}),Object(K.jsx)(ee.a.button,{onClick:function(){return c(V())},whileTap:{scale:1.4},className:"sidebar-close",children:Object(K.jsx)($.a,{fill:"#fff",size:"1.4rem"})})]})]})}),Object(K.jsx)("p",{className:"text-muted text-center mt-2",children:l}),Object(K.jsx)("div",{className:"w-100 d-flex justify-content-center mb-3",children:Object(K.jsxs)(o.b,{to:"/stats",className:"btn btn-outline-info d-flex align-items-center text-",children:[Object(K.jsx)(Q.b,{className:"me-1"}),"Estad\xedsticas"]})}),Object(K.jsxs)("div",{children:[Object(K.jsxs)(z.a,{"aria-label":"selecci\xf3n",className:"w-100",children:[Object(K.jsx)("button",{onClick:function(){return s("online")},className:"text-resp button-group w-50 ".concat("online"===a&&"button-group-active"," fw-bold text-white"),children:"Conectados"}),Object(K.jsx)("button",{onClick:function(){return s("all")},className:"text-resp button-group w-50 ".concat("all"===a&&"button-group-active"," fw-bold text-white"),children:"Todos"})]}),"online"===a?Object(K.jsx)(W,{}):Object(K.jsx)(X,{})]})]})},ae=a(5),ne=a.n(ae),se=a(690),ce=function(e){var t=e.text,a=e.name,n=e.date;return Object(K.jsxs)(ee.a.div,{animate:{scale:[1,1.1,1]},className:"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-received",children:[a&&Object(K.jsxs)("div",{className:"text-msg-res fw-bold d-flex justify-content-between align-items-center",children:[a,Object(K.jsx)(R.a,{title:"",size:"sm",id:"dropdown-item-button",children:Object(K.jsx)(U.a.Item,{as:"button",onClick:function(){navigator.clipboard.writeText(t).then((function(){x.a.fire("Mensaje copiado")}))},className:"bg-secondary text-light text-msg-res",children:"Copiar texto"})})]}),t,Object(K.jsx)("span",{className:"text-date d-block text-muted align-self-end",children:n})]})},ie=function(e){var t=e.text,a=e.date;return Object(K.jsxs)(ee.a.div,{animate:{scale:[1,1.1,1]},className:"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-sent",children:[t,Object(K.jsx)("span",{className:"text-date d-block text-light align-self-end fz-12px",children:a})]})},re=a(700),oe=a(332),le=function(e){var t=e.show,a=e.handleClose,n=e.participants;return Object(K.jsxs)(re.a,{show:t,onHide:a,backdrop:"static",keyboard:!1,children:[Object(K.jsxs)(re.a.Header,{children:[Object(K.jsx)(re.a.Title,{children:"Informaci\xf3n"}),Object(K.jsx)(ee.a.button,{onClick:a,className:"btn",whileTap:{scale:1.4},children:Object(K.jsx)(oe.a,{})})]}),Object(K.jsxs)(re.a.Body,{children:[Object(K.jsx)("h4",{className:"fw-bold text-center",children:"Participantes"}),n?Object(K.jsxs)("div",{className:"w-100",children:[Object(K.jsx)("div",{className:"alert alert-success text-center",children:Object(K.jsxs)("strong",{children:[n[0]," - ",n[1]]})}),Object(K.jsx)("img",{src:"./assets/chatting.svg",alt:"chatting",className:"svg"})]}):Object(K.jsxs)("div",{className:"w-100",children:[Object(K.jsxs)("div",{className:"alert alert-info text-center text-resp",children:["Todos los usuarios registrados en ",Object(K.jsx)("strong",{children:"ChatRoom"})]}),Object(K.jsx)("img",{src:"./assets/chatting-group.svg",alt:"chatting-group",className:"svg"})]})]}),Object(K.jsx)(re.a.Footer,{})]})},de=function(e){var t=e.sendMessage,a=e.showMenuButton,s=Object(n.useState)(!1),c=Object(M.a)(s,2),i=c[0],o=c[1],l=Object(r.b)(),d=Object(n.useRef)(),u=Object(r.c)((function(e){return e.dashboard})).messages,j=Object(r.c)((function(e){return e.auth})).uid,b=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"chat w-100",children:[Object(K.jsxs)("div",{className:"d-flex align-items-center justify-content-between bg-head-chat",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{src:"./assets/img1.jpg",alt:"Foto de perfil de grupo",id:"img-chat",className:"ms-3"}),Object(K.jsx)("span",{className:"text-white fw-bold ms-3 text-resp",children:"Chat general"})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)(ee.a.button,{onClick:function(){return o(!0)},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(K.jsx)(Q.a,{})}),a&&Object(K.jsx)(ee.a.button,{onClick:function(){return l(G())},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(K.jsx)(F.a,{})})]})]}),Object(K.jsxs)("div",{className:"overflow-auto pt-4 bg-chat chat-container",children:[0===u.length&&Object(K.jsx)("div",{className:"alert alert-warning text-center mx-5 text-resp",children:"Todav\xeda no hay mensajes, comienza escribiendo uno."}),0===u.length&&Object(K.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(K.jsx)(se.a,{animation:"border",role:"status",variant:"primary"})}),u&&u.map((function(e,t){var a=u.length-1===t;return e.user._id===j?Object(K.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?b:null,children:Object(K.jsx)(ie,{text:e.message,date:e.date},t)},t):Object(K.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?b:null,children:Object(K.jsx)(ce,{text:e.message,name:e.user.name,date:e.date},t)},t)}))]}),Object(K.jsx)("div",{id:"chat-input",children:Object(K.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===d.current.value||t(d.current.value),d.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(K.jsx)("input",{ref:d,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(K.jsx)("button",{type:"submit",id:"message-submit",className:"d-flex align-items-center",children:Object(K.jsx)(Q.c,{color:"#fff",size:"18px"})})]})})]}),Object(K.jsx)(le,{handleClose:function(){return o(!1)},show:i})]})};de.propType={sendMessage:ne.a.func.isRequired};var ue=function(e){var t=e.sendPrivateMessage,a=e.showMenuButton,s=Object(n.useRef)(),c=Object(n.useState)(!1),i=Object(M.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),u=Object(M.a)(d,2),j=u[0],b=u[1],h=Object(r.c)((function(e){return e.dashboard})).selectedUser,O=Object(r.c)((function(e){return e.dashboard})).chatMessages,f=Object(r.c)((function(e){return e.auth})),p=f.uid,g=f.name,v=Object(r.b)(),w=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(n.useEffect)((function(){(null===h||void 0===h?void 0:h.uid)&&(b(!0),m.a.get("".concat("https://room-chat-dan.herokuapp.com/api","/messages/get-all-chat/").concat(p,"/").concat(null===h||void 0===h?void 0:h.uid),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}}).then((function(e){var t=e.data;b(!1),v(P(t.messagesChat))})).catch((function(e){x.a.fire("UPS, hubo un error cargando el chat")})))}),[null===h||void 0===h?void 0:h.uid,null===h||void 0===h?void 0:h.name,p,v]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"chat w-100",children:[Object(K.jsxs)("div",{className:"py-2 d-flex align-items-center justify-content-between bg-head-chat",children:[Object(K.jsx)("div",{children:Object(K.jsxs)("span",{className:"text-white fw-bold ms-3 text-resp",children:[Object(K.jsx)(H.a,{color:"#fff",size:"26px",className:"mr-10"}),h.name]})}),Object(K.jsxs)("div",{children:[Object(K.jsx)(ee.a.button,{onClick:function(){return l(!0)},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(K.jsx)(Q.a,{})}),a&&Object(K.jsx)(ee.a.button,{onClick:function(){return v(G())},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(K.jsx)(F.a,{})})]})]}),Object(K.jsxs)("div",{className:"overflow-auto pt-4 bg-chat chat-container",children:[j&&Object(K.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(K.jsx)(se.a,{animation:"border",role:"status",variant:"primary"})}),O&&!j&&0===O.length&&Object(K.jsxs)("div",{className:"alert alert-warning text-center text-resp mx-alert",children:["A\xfan no tienes mensajes con ",Object(K.jsxs)("strong",{children:[null===h||void 0===h?void 0:h.name,"."]})]}),O&&O.map((function(e,t){var a=O.length-1===t;return e.recipient!==p?Object(K.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?w:null,children:Object(K.jsx)(ie,{text:e.message,date:e.date},t)},t):Object(K.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?w:null,children:Object(K.jsx)(ce,{text:e.message,date:e.date},t)},t)}))]}),Object(K.jsx)("div",{id:"chat-input",children:Object(K.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===s.current.value||t(s.current.value),s.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(K.jsx)("input",{ref:s,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(K.jsx)("button",{type:"submit",id:"message-submit",className:"bg-primary",children:Object(K.jsx)(Q.c,{color:"#fff"})})]})})]}),Object(K.jsx)(le,{handleClose:function(){return l(!1)},show:o,participants:[g,null===h||void 0===h?void 0:h.name]})]})},je=a(244),be=a.n(je),me=a(333),he=s.a.createContext();var xe=function(e){var t=e.children,a=Object(n.useState)(),s=Object(M.a)(a,2),c=s[0],i=s[1],o=Object(r.c)((function(e){return e.auth})),l=o.uid,d=o.name,u=Object(r.c)((function(e){return e.dashboard})).selectedUser,j=Object(r.b)(),b=Object(n.useCallback)((function(e){var t=new Date,a=be()(t).format("LT");c.emit("send-message",{message:e,user:l,date:a})}),[c,l]),m=Object(n.useCallback)((function(e){var t=new Date,a=be()(t).format("LT");c.emit("send-private-message",[{message:e,date:a},{uid:u.uid,name:u.name}])}),[null===u||void 0===u?void 0:u.uid,null===u||void 0===u?void 0:u.name,c]);Object(n.useEffect)((function(){var e=Object(me.io)("https://room-chat-dan.herokuapp.com/",{query:{uid:l,name:d}});return i(e),function(){return e.close()}}),[l,d]),Object(n.useEffect)((function(){if(c)return c.on("receive-messages",(function(e){j(q(e))})),function(){return c.off("receive-messages")}}),[c,j]),Object(n.useEffect)((function(){if(c)return c.on("created-message",(function(e){j(q(e))})),function(){return c.off("created-message")}}),[c,j]),Object(n.useEffect)((function(){if(c)return c.on("active-users",(function(e){j(function(e){return{type:N,payload:e}}(e))})),function(){return c.off("active-users")}}),[c,j]),Object(n.useEffect)((function(){if(c)return c.on("private-messages",(function(e){j(P(e))})),function(){return c.off("private-messages")}}),[c,j]),Object(n.useEffect)((function(){if(c)return c.on("registered-users",(function(e){j(function(e){return{type:C,payload:e}}(e))})),function(){return c.off("registered-users")}}),[c,j]),Object(n.useEffect)((function(){if(c)return c.on("get-stats",(function(e){j(function(e){return{type:I,payload:e}}(e))})),function(){return c.off("get-stats")}}),[c,j]);var h={sendMessage:b,sendPrivateMessage:m};return Object(K.jsx)(he.Provider,{value:h,children:t})},Oe=a(97),fe=function(){var e=Object(r.c)((function(e){return e.auth})).name,t=Object(n.useState)(window.screen.width),a=Object(M.a)(t,2),s=a[0],c=a[1],i=Object(r.c)((function(e){return e.dashboard})),o=i.selectedUser,l=i.messages,d=i.showSidebar,u=Object(n.useContext)(he),j=u.sendMessage,b=u.sendPrivateMessage,h=Object(r.b)();return Object(n.useEffect)((function(){0===l.length&&m.a.get("".concat("https://room-chat-dan.herokuapp.com/api","/messages/get-all"),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}}).then((function(e){var t=e.data;return h(q(t.messages))}))}),[h,l]),Object(n.useEffect)((function(){var e=function(e){c(e.target.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Oe.a,{children:[Object(K.jsxs)("title",{children:[e," | ChatRoom"]}),Object(K.jsx)("meta",{name:"description",content:"Contenido principal del usuario y salas de chat"})]}),Object(K.jsxs)("div",{id:"container-grid",children:[s>900&&Object(K.jsx)("div",{className:"p-0 aside-color",children:Object(K.jsx)(Z,{})}),s<=900&&Object(K.jsx)("div",{className:"p-0 aside-color aside-responsive ".concat(d&&"aside-responsive-show"),children:Object(K.jsx)(te,{})}),Object(K.jsx)("div",{className:"p-0 d-flex",children:Object(K.jsx)("div",{className:"d-flex column-chat-dimensions",id:"chat",children:(null===o||void 0===o?void 0:o.uid)&&(null===L||void 0===L?void 0:L.name)?Object(K.jsx)(ue,{sendPrivateMessage:b,showMenuButton:s<900}):Object(K.jsx)(de,{sendMessage:j,showMenuButton:s<900})})})]})]})},pe=a(691),ge=a(692),ve=a(336),we=a(693),Ne=a(694),ye=a(698),ke=a(353),Ce=a(354),Se=a(166),_e=a(161),Ie=a(363),Te=a(337),Ae=function(){var e=Object(r.c)((function(e){return e.stats})).countMessages;return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Oe.a,{children:[Object(K.jsx)("title",{children:"Stats | ChatRoom"}),Object(K.jsx)("meta",{name:"description",content:"Estadisticas del chat general"})]}),Object(K.jsx)(pe.a,{fluid:!0,children:Object(K.jsx)(ge.a,{children:Object(K.jsx)(ve.a,{md:12,className:"p-0 bg-chat",children:Object(K.jsxs)("div",{className:"container-full",children:[Object(K.jsx)("div",{className:"px-3 py-2 bg-head-chat",children:Object(K.jsxs)(o.b,{to:"/",className:"btn btn-outline-info fw-bold d-flex align-items-center d-inline-flex",children:[Object(K.jsx)(Te.a,{}),"Inicio"]})}),Object(K.jsx)("h3",{className:"text-white text-center mt-5",children:"Usuarios que m\xe1s mensajes han enviado"}),Object(K.jsx)("h4",{className:"text-info text-center",children:"En el chat general"}),Object(K.jsx)(we.a,{width:"100%",height:"60%",className:"mt-5",children:Object(K.jsxs)(Ne.a,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[Object(K.jsx)(ye.a,{strokeDasharray:"3 3"}),Object(K.jsx)(ke.a,{dataKey:"name"}),Object(K.jsx)(Ce.a,{}),Object(K.jsx)(Se.a,{}),Object(K.jsx)(_e.a,{}),Object(K.jsx)(Ie.a,{dataKey:"messages",fill:"#8884d8"})]})})]})})})})]})},Ee=a(701),Be=a(330),De=a(202),Me=a(84),Re=function(){var e=Object(r.b)(),t=Object(De.a)({initialValues:{email:"",password:""},validationSchema:Me.a({email:Me.b().email(!0).required(!0),password:Me.b().required(!0).min(8,!0)}),onSubmit:function(t){var a=t.email,n=t.password;e(function(e,t){return function(){var a=Object(j.a)(u.a.mark((function a(n){var s,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.post("".concat("https://room-chat-dan.herokuapp.com/api","/auth/login"),{email:e,password:t});case 2:s=a.sent,(c=s.data).ok?(localStorage.setItem("chat-token",c.token),n(A({uid:c.user.uid,name:c.user.name,email:c.user.email}))):x.a.fire("Error",c.msg,"error");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a,n))}});return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Oe.a,{children:[Object(K.jsx)("meta",{charSet:"utf-8"}),Object(K.jsx)("title",{children:"Chat | Login"}),Object(K.jsx)("meta",{name:"description",content:"Inicio de sesi\xf3n"})]}),Object(K.jsx)(pe.a,{fluid:!0,className:"bg-dark d-flex justify-content-center align-items-center container-full",children:Object(K.jsx)("div",{className:"form",children:Object(K.jsxs)(Ee.a,{onSubmit:t.handleSubmit,className:"animate__animated animate__fadeIn",children:[Object(K.jsx)("h2",{className:"text-white text-start mb-3 texto",children:"ChatRoom"}),Object(K.jsx)("h4",{className:"text-white lead",children:"Inicio de sesi\xf3n"}),Object(K.jsx)(Ee.a.Group,{className:"mb-3",children:Object(K.jsx)(Ee.a.Control,{autoComplete:"off",name:"email",className:"bg-dark text-white",type:"email",placeholder:"Correo",value:t.values.email,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.email})}),Object(K.jsx)(Ee.a.Group,{children:Object(K.jsx)(Ee.a.Control,{name:"password",className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",value:t.values.password,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.password})}),Object(K.jsx)(Be.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Ingresar"}),Object(K.jsx)(o.b,{to:"/auth/register",className:"d-inline-block mt-3",children:"Si no tienes una cuenta"})]})})})]})},Ue=function(){var e=Object(r.b)(),t=Object(De.a)({initialValues:{name:"",email:"",password:""},validationSchema:Me.a({name:Me.b().required(!0).min(3,!0),email:Me.b().email(!0).required(!0),password:Me.b().required(!0).min(8,!0)}),onSubmit:function(t){var a=t.name,n=t.email,s=t.password;e(function(e,t,a){return function(){var n=Object(j.a)(u.a.mark((function n(s){var c,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post("".concat("https://room-chat-dan.herokuapp.com/api","/auth/register"),{name:e,email:t,password:a});case 2:c=n.sent,(i=c.data).ok?(localStorage.setItem("chat-token",i.token),s(E()),s(A({uid:i.user.uid,name:i.user.name,email:i.user.email})),x.a.fire({position:"bottom-end",icon:"success",title:"Cuenta creada",showConfirmButton:!1,timer:1500})):x.a.fire("Error",i.msg,"error");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,n,s))}});return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Oe.a,{children:[Object(K.jsx)("meta",{charSet:"utf-8"}),Object(K.jsx)("title",{children:"Chat | Register"}),Object(K.jsx)("meta",{name:"description",content:"Registro de nuevo usuario"})]}),Object(K.jsx)(pe.a,{fluid:!0,className:"bg-dark d-flex flex-column justify-content-center align-items-center container-full",children:Object(K.jsx)("div",{className:"form",children:Object(K.jsxs)(Ee.a,{onSubmit:t.handleSubmit,className:"animate__animated animate__fadeIn",children:[Object(K.jsx)("h2",{className:"text-white text-start mb-3 texto",children:"ChatRoom"}),Object(K.jsx)("h4",{className:"text-white lead mt-3",children:"Registro"}),Object(K.jsx)(Ee.a.Group,{className:"mb-3",children:Object(K.jsx)(Ee.a.Control,{autoComplete:"off",name:"name",className:"bg-dark text-white",type:"text",placeholder:"Nombre",value:t.values.name,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.name})}),Object(K.jsx)(Ee.a.Group,{className:"mb-3",children:Object(K.jsx)(Ee.a.Control,{autoComplete:"off",name:"email",className:"bg-dark text-white",type:"email",placeholder:"Correo",value:t.values.email,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.email})}),Object(K.jsx)(Ee.a.Group,{children:Object(K.jsx)(Ee.a.Control,{name:"password",className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",value:t.values.password,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.password})}),Object(K.jsx)(Be.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Registrarme"}),Object(K.jsx)(o.b,{to:"/auth/login",className:"d-inline-block mt-3",children:"Si ya tienes una cuenta"})]})})})]})},ze=function(){return Object(K.jsx)(o.a,{children:Object(K.jsxs)(l.d,{children:[Object(K.jsx)(l.b,{path:"/auth/login",component:Re}),Object(K.jsx)(l.b,{path:"/auth/register",component:Ue}),Object(K.jsx)(l.a,{to:"/auth/login"})]})})},He=a(22),Fe=a(201),qe=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Fe.a)(e,["isAuthenticated","component"]);return Object(K.jsx)(l.b,Object(He.a)(Object(He.a)({},n),{},{component:function(e){return t?Object(K.jsx)(a,Object(He.a)({},e)):Object(K.jsx)(l.a,{to:"/login"})}}))},Pe=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Fe.a)(e,["isAuthenticated","component"]);return Object(K.jsx)(l.b,Object(He.a)(Object(He.a)({},n),{},{component:function(e){return t?Object(K.jsx)(l.a,{to:"/"}):Object(K.jsx)(a,Object(He.a)({},e))}}))},Le=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),a=t.checking,s=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat("https://room-chat-dan.herokuapp.com/api","/auth/renew"),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}});case 2:a=e.sent,(n=a.data).ok?(localStorage.setItem("chat-token",n.token),t(A({uid:n.user.uid,name:n.user.name,email:n.user.email}))):t(B());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(K.jsx)("div",{className:"flexible",children:Object(K.jsxs)("div",{className:"sk-chase",children:[Object(K.jsx)("div",{className:"sk-chase-dot"}),Object(K.jsx)("div",{className:"sk-chase-dot"}),Object(K.jsx)("div",{className:"sk-chase-dot"}),Object(K.jsx)("div",{className:"sk-chase-dot"}),Object(K.jsx)("div",{className:"sk-chase-dot"}),Object(K.jsx)("div",{className:"sk-chase-dot"})]})}):Object(K.jsx)(xe,{children:Object(K.jsx)(o.a,{children:Object(K.jsxs)(l.d,{children:[Object(K.jsx)(Pe,{isAuthenticated:!!s,path:"/auth",component:ze}),Object(K.jsx)(qe,{isAuthenticated:!!s,exact:!0,path:"/",component:fe}),Object(K.jsx)(qe,{isAuthenticated:!!s,path:"/stats",component:Ae}),Object(K.jsx)(l.a,{to:"/auth/login"})]})})})},Ge=a(165),Ve=a(360),Je={checking:!0},Ke={messages:[],users:[],selectedUser:{},chatMessages:[],allUsers:[]},We={countMessages:[]},Xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.c,Qe=Object(Ge.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(He.a)(Object(He.a)({},e),{},{checking:!1},t.payload);case p:return{checking:!1};case O:return Object(He.a)(Object(He.a)({},e),{},{checking:!1});case g:return Object(He.a)(Object(He.a)({},e),{},{newUser:!0});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(He.a)(Object(He.a)({},e),{},{messages:t.payload});case N:return Object(He.a)(Object(He.a)({},e),{},{users:t.payload});case y:return{messages:[],users:[]};case k:return Object(He.a)(Object(He.a)({},e),{},{selectedUser:t.payload});case w:return Object(He.a)(Object(He.a)({},e),{},{chatMessages:t.payload});case C:return Object(He.a)(Object(He.a)({},e),{},{allUsers:t.payload});case S:return Object(He.a)(Object(He.a)({},e),{},{showSidebar:!0});case _:return Object(He.a)(Object(He.a)({},e),{},{showSidebar:!1});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(He.a)(Object(He.a)({},e),{},{countMessages:t.payload});case T:return{countMessages:[]};default:return e}}}),Ye=Object(Ge.d)(Qe,Xe(Object(Ge.a)(Ve.a)));a(667),a(668);var Ze=function(){return Object(K.jsx)(r.a,{store:Ye,children:Object(K.jsx)(Le,{})})};a(669),a(670);i.a.render(Object(K.jsx)(Ze,{}),document.getElementById("root"))}},[[680,1,2]]]);
//# sourceMappingURL=main.a8aeab41.chunk.js.map