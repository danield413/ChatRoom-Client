{"version":3,"sources":["types/types.js","actions/auth.js","actions/dashboard.js","components/dashboard/Online.js","components/dashboard/All.js","actions/stats.js","helpers/cutName.js","components/dashboard/Aside.js","components/dashboard/AsideResponsive.js","components/dashboard/MessageReceived.js","components/dashboard/MessageSent.js","components/dashboard/ModalInfo.js","components/dashboard/Chat.js","components/dashboard/PrivateChat.js","context/SocketProvider.js","components/dashboard/DashboardScreen.js","components/statistics/StatisticsScreen.js","components/auth/GoogleButton.js","components/auth/LoginScreen.js","components/auth/RegisterScreen.js","router/AuthRouter.js","router/PrivateRoute.js","router/PublicRoute.js","router/AppRouter.js","reducers/authReducer.js","reducers/dashboardReducer.js","reducers/statsReducer.js","store/store.js","App.js","index.js"],"names":["types","login","data","type","payload","newUser","checkingFinish","logout","addMessages","addChatMessages","selectUser","openSidebar","closeSidebar","cleanDashboard","Online","dispatch","useDispatch","uid","useSelector","state","auth","selectedUser","dashboard","users","className","onClick","name","src","alt","map","user","id","picture","All","allUsers","cleanStats","cutName","split","Aside","useState","setState","userLeaves","useCallback","find","useEffect","DropdownButton","title","variant","Dropdown","ItemText","Item","as","localStorage","removeItem","to","ButtonGroup","aria-label","AsideResponsive","motion","button","whileTap","scale","fill","size","MessageReceived","text","date","div","animate","navigator","clipboard","writeText","then","Swal","fire","MessageSent","ModalInfo","show","handleClose","participants","Modal","onHide","backdrop","keyboard","Header","Title","Body","Footer","Chat","sendMessage","showMenuButton","setShow","textRef","useRef","messages","setRef","node","scrollIntoView","behavior","length","message","index","lastMessage","_id","ref","onSubmit","e","preventDefault","current","value","placeholder","autoComplete","color","propType","PropTypes","func","isRequired","PrivateChat","sendPrivateMessage","loading","setLoading","chatMessages","axios","get","process","headers","getItem","messagesChat","catch","err","Spinner","animation","role","recipient","SocketContext","React","createContext","SocketProvider","children","socket","setSocket","now","Date","moment","format","emit","newSocket","io","query","close","on","off","addUsers","addAllUsers","setStats","values","Provider","DashboardScreen","window","screen","width","setWidth","showSidebar","useContext","windowResize","target","innerWidth","addEventListener","removeEventListener","Helmet","content","StatisticsScreen","countMessages","stats","Container","fluid","Row","Col","md","ResponsiveContainer","height","BarChart","margin","top","right","left","bottom","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","GoogleButton","url","location","hostname","includes","doFetch","id_token","a","fetch","method","body","JSON","stringify","res","json","email","google","token","setItem","console","log","onSuccess","tokenId","clientId","buttonText","cookiePolicy","render","renderProps","disabled","LoginScreen","formik","useFormik","initialValues","password","validationSchema","Yup","required","min","post","ok","msg","startLogin","charSet","Form","handleSubmit","Group","Control","onChange","handleChange","onBlur","handleBlur","isInvalid","errors","Button","RegisterScreen","position","icon","showConfirmButton","timer","startRegister","AuthRouter","path","component","PrivateRoute","isAuthenticated","Component","rest","props","PublicRoute","AppRouter","checking","exact","initialState","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","reducers","combineReducers","action","store","createStore","applyMiddleware","thunk","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.84bdc62d.chunk.js","sourcesContent":["export const types = {\r\n    authCheckingJWTFinish: \"AUTH checking JWT finish\",\r\n    authLogin: \"AUTH login\",\r\n    authLogout: \"AUTH logout\",\r\n    newUser: \"AUTH new user\",\r\n\r\n    addMessages: \"DASHBOARD add messages\",\r\n    addChatMessages: \"DASHBOARD add chat messages\",\r\n    addUsers: \"DASHBOARD add users\",\r\n    cleanDashboard: \"DASHBOARD clean\",\r\n    selectUser: \"DASHBOARD select user\",\r\n    addAllUsers: \"DASHBOARD add all registered users\",\r\n    openSidebar: \"DASHBOARD open sidebar\",\r\n    closeSidebar: \"DASHBOARD close sidebar\",\r\n    \r\n    loadStats: \"STATS load stats\",\r\n    cleanStats: \"STATS clean stats\",\r\n}","import axios from \"axios\";\r\nimport Swal from 'sweetalert2'\r\nimport { types } from \"../types/types\";\r\n\r\nexport const startLogin = ( email, password ) => {\r\n    return async(dispatch) => {\r\n\r\n        const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/login`, {\r\n            email, password\r\n        })\r\n\r\n        if(data.ok){\r\n            localStorage.setItem('chat-token', data.token);\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n            }))\r\n        } else {\r\n            Swal.fire('Error', data.msg, 'error');\r\n        }\r\n    }\r\n}\r\n\r\nexport const login = ( data ) => ({\r\n    type: types.authLogin,\r\n    payload: data\r\n});\r\n\r\nexport const startRegister = ( name, email, password ) => {\r\n    return async(dispatch) => {\r\n        const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/register`, {\r\n            name, email, password\r\n        });\r\n \r\n        if(data.ok) {\r\n            localStorage.setItem('chat-token', data.token);\r\n            \r\n            dispatch( newUser() );\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n                picture: data.user.picture\r\n            }));\r\n\r\n            Swal.fire({\r\n                position: 'bottom-end',\r\n                icon: 'success',\r\n                title: 'Cuenta creada',\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            })\r\n        } else {\r\n            Swal.fire('Error', data.msg, 'error')\r\n        } \r\n\r\n    }\r\n}\r\n\r\nexport const startChecking = () => {\r\n    return async(dispatch) => {\r\n        const { data } = await axios.get(`${process.env.REACT_APP_API_URL}/auth/renew`,{\r\n            headers: {\r\n                'x-token': localStorage.getItem('chat-token'),\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        if(data.ok) {\r\n            localStorage.setItem('chat-token', data.token);\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n                picture: data.user.picture\r\n            }))\r\n        } else {\r\n            dispatch( checkingFinish() )\r\n        }\r\n    }\r\n}\r\n\r\nconst newUser = () => ({ type: types.newUser })\r\n\r\nconst checkingFinish = () => ({ type: types.authCheckingJWTFinish })\r\n\r\nexport const logout = () => ({type: types.authLogout})\r\n","import { types } from \"../types/types\";\r\n\r\n\r\nexport const addMessages = ( payload ) => ({\r\n    type: types.addMessages,\r\n    payload\r\n})\r\n\r\nexport const addChatMessages = (payload) => ({\r\n    type: types.addChatMessages,\r\n    payload\r\n})\r\n\r\nexport const addUsers = ( payload ) => ({\r\n    type: types.addUsers,\r\n    payload\r\n})\r\n\r\nexport const selectUser = ( payload ) => ({\r\n    type: types.selectUser,\r\n    payload\r\n})\r\n\r\nexport const addAllUsers = ( payload ) => ({\r\n    type: types.addAllUsers,\r\n    payload\r\n})\r\n\r\nexport const openSidebar = () => ({ type: types.openSidebar })\r\nexport const closeSidebar = () => ({ type: types.closeSidebar })\r\n\r\nexport const cleanDashboard = () => ({ type: types.cleanDashboard })","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { closeSidebar, selectUser } from '../../actions/dashboard';\r\n\r\nexport const Online = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { uid } = useSelector(state => state.auth);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const { users } = useSelector(state => state.dashboard);\r\n\r\n    return (\r\n        <>\r\n            <h6 className=\"lead ms-4 my-3 \"><strong className=\"text-light text-resp\">Conectados</strong></h6>\r\n                <button \r\n                    onClick={ () => {\r\n                        dispatch( selectUser({}) )\r\n                        dispatch( closeSidebar() )\r\n                    }}\r\n                    className={`text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ${!selectedUser?.name && !selectedUser?.uid ? 'user-sidebar-active' : ''}`} \r\n                >\r\n                    <img src=\"./assets/img1.jpg\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                    <span className=\"fw-bold text-resp\">Chat general <i className=\"fas fa-circle mx-2 fz-12px text-online\" ></i></span>\r\n                </button>\r\n                <div className=\"w-100 overflow-auto online-height\">\r\n                    {users &&\r\n                        users.map(user => (\r\n                            (user?.id !== uid) &&\r\n                                <button \r\n                                    key={user.id} \r\n                                    onClick={ () => {\r\n                                        dispatch( selectUser({ uid: user?.id, name: user?.name, picture: user?.picture }) )\r\n                                        dispatch( closeSidebar() )\r\n                                    } }\r\n                                    className={`text-resp text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ${user.id === selectedUser?.uid ? 'user-sidebar-active' : ''}`} \r\n                                >\r\n                                    {(user.picture !== 'undefined' && user.picture !== 'null')\r\n                                        ? <img src={user.picture} alt={user.name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                                        : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                                    }\r\n                                    <span className=\"fw-bold text-resp\">{user.name} <i className=\"fas fa-circle mx-2 text-online\"></i></span>\r\n                                </button>\r\n                        ))\r\n                    }\r\n                </div>\r\n                    \r\n        </>\r\n    )\r\n}\r\n ","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const All = () => {\r\n\r\n    const { allUsers } = useSelector(state => state.dashboard);\r\n    const { uid } = useSelector(state => state.auth);\r\n\r\n    return (\r\n        <>\r\n            <h5 className=\"lead ms-4 my-3\"><strong className=\"text-light text-resp\">Todos</strong></h5>\r\n            <div className=\"w-100 overflow-auto all-height\">\r\n            {allUsers &&\r\n                allUsers.map(user => (\r\n                    (user?.id !== uid) &&\r\n                        <button \r\n                            key={user.uid} \r\n                            className=\"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar\" \r\n                        >\r\n                            {user.picture \r\n                                ? <img src={user?.picture} alt={user?.name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                                : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                            }\r\n                            <span className=\"fw-bold\">{user.name}</span>\r\n                        </button>\r\n                ))\r\n            }\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import { types } from \"../types/types\";\r\n\r\nexport const setStats = (payload) => ({\r\n    type: types.loadStats,\r\n    payload\r\n})\r\n\r\nexport const cleanStats = () => ({ type: types.cleanStats })","\r\n\r\nexport const cutName = (name) => {\r\n    if(name) {\r\n        const split = name.split(' ');\r\n        return split[0];\r\n    }\r\n}","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { ButtonGroup, Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport { AiTwotoneSetting } from 'react-icons/ai'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { logout } from '../../actions/auth'\r\nimport { cleanDashboard, closeSidebar, selectUser } from '../../actions/dashboard';\r\nimport { Online } from './Online';\r\nimport { All } from './All';\r\nimport { Link } from 'react-router-dom';\r\nimport { IoIosStats } from 'react-icons/io';\r\nimport { cleanStats } from '../../actions/stats';\r\nimport { cutName } from '../../helpers/cutName';\r\n\r\nexport const Aside = () => {\r\n\r\n    const [state, setState] = useState('online')\r\n    const dispatch = useDispatch();\r\n    const { uid, name, picture } = useSelector(state => state.auth);\r\n    const { users } = useSelector(state => state.dashboard);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n\r\n    const userLeaves = useCallback(() => {\r\n        const u = users.find( user => user.id === selectedUser?.uid );\r\n        if(!u) {\r\n            dispatch( selectUser({}) )\r\n        }\r\n    }, [users, selectedUser?.uid, dispatch])\r\n\r\n    useEffect(() => {\r\n       userLeaves()\r\n    }, [users, userLeaves])\r\n    \r\n    const handleLogout = () => {\r\n        dispatch( logout() );\r\n        dispatch( cleanDashboard() );\r\n        dispatch( cleanStats() );\r\n        localStorage.removeItem('chat-token');\r\n    }\r\n\r\n    return (\r\n        <aside className=\"h-100\">\r\n            <header>\r\n                <div className=\"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height\">\r\n                    <div>\r\n                        {picture \r\n                        ? <img src={picture} alt={name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                        : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                        }\r\n                        <span className=\"fw-bold text-white\">\r\n                            {cutName(name)}\r\n                            <i className=\"fas fa-circle mx-2 text-online\"></i>\r\n                        </span>\r\n                    </div>\r\n                    \r\n                    <DropdownButton title={<AiTwotoneSetting />} id=\"dropdown-item-button\" variant=\"dark\" className=\"bg-dark d-inline\">\r\n                        <Dropdown.ItemText className=\"bg-secondary text-light\">\r\n                            <strong>Opciones</strong>\r\n                        </Dropdown.ItemText>\r\n                        <Dropdown.Item as=\"button\" onClick={handleLogout} className=\"bg-secondary text-light\">\r\n                            Salir\r\n                        </Dropdown.Item>\r\n                    </DropdownButton>\r\n                        \r\n                </div>\r\n            </header>\r\n            <p className=\"text-muted text-center mt-2\">ID: {uid}</p>\r\n            <div className=\"w-100 d-flex justify-content-center mb-3\">\r\n                <Link \r\n                    className=\"text-resp link-button px-3 fw-bold\"\r\n                    to=\"/stats\"\r\n                    onClick={() => dispatch( closeSidebar() )}\r\n                >\r\n                    <IoIosStats />\r\n                    Estadísticas\r\n                </Link>\r\n            </div>\r\n            <div>\r\n                <ButtonGroup aria-label=\"selección\" className=\"w-100\">\r\n                    <button \r\n                        onClick={ () => setState('online')} \r\n                        className={`button-group w-50 text-resp ${state === 'online' && 'button-group-active'} fw-bold text-white`}\r\n                    >\r\n                        Conectados\r\n                    </button>\r\n                    <button \r\n                        onClick={ () => setState('all')} \r\n                        className={`button-group w-50 text-resp ${state === 'all' && 'button-group-active'} fw-bold text-white` }\r\n                    >\r\n                        Todos\r\n                    </button>\r\n                </ButtonGroup>\r\n                {( state === 'online' ) \r\n                ? <Online />\r\n                : <All />\r\n                }\r\n            </div>\r\n        </aside>\r\n    )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { ButtonGroup, Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport { AiTwotoneSetting } from 'react-icons/ai'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { logout } from '../../actions/auth'\r\nimport { cleanDashboard, closeSidebar, selectUser } from '../../actions/dashboard';\r\nimport { Online } from './Online';\r\nimport { All } from './All';\r\nimport { Link } from 'react-router-dom';\r\nimport { IoIosStats } from 'react-icons/io';\r\nimport { cleanStats } from '../../actions/stats';\r\nimport { VscChromeClose } from 'react-icons/vsc';\r\nimport { motion } from 'framer-motion';\r\nimport { cutName } from '../../helpers/cutName';\r\n\r\nexport const AsideResponsive = () => {\r\n\r\n    const [state, setState] = useState('online')\r\n    const dispatch = useDispatch();\r\n    const { uid, name, picture } = useSelector(state => state.auth);\r\n    const { users } = useSelector(state => state.dashboard);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n\r\n    const userLeaves = useCallback(() => {\r\n        const u = users.find( user => user.id === selectedUser?.uid );\r\n        if(!u) {\r\n            dispatch( selectUser({}) )\r\n        }\r\n    }, [users, selectedUser?.uid, dispatch])\r\n\r\n    useEffect(() => {\r\n       userLeaves()\r\n    }, [users, userLeaves])\r\n    \r\n    const handleLogout = () => {\r\n        dispatch( logout() );\r\n        dispatch( cleanDashboard() );\r\n        dispatch( cleanStats() );\r\n        localStorage.removeItem('chat-token');\r\n    }\r\n\r\n    return (\r\n        <aside className=\"h-100\">\r\n            <header>\r\n                <div className=\"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height\">\r\n                    <div>\r\n                        {picture \r\n                        ? <img src={picture} alt={name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                        : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                        }\r\n                        <span className=\"fw-bold text-white text-resp\">\r\n                            {cutName(name)}\r\n                            <i className=\"fas fa-circle mx-2 text-online\"></i>\r\n                        </span>\r\n                    </div>\r\n                    <div>\r\n                        <DropdownButton title={<AiTwotoneSetting />} id=\"dropdown-item-button\" variant=\"dark\" className=\"bg-dark d-inline\">\r\n                            <Dropdown.ItemText className=\"bg-secondary text-light text-resp\">\r\n                                <strong>Opciones</strong>\r\n                            </Dropdown.ItemText>\r\n                            <Dropdown.Item as=\"button\" onClick={handleLogout} className=\"bg-secondary text-light text-resp\">\r\n                                Salir\r\n                            </Dropdown.Item>\r\n                        </DropdownButton>\r\n                        <motion.button \r\n                            onClick={() => dispatch( closeSidebar() ) }\r\n                            whileTap={{ scale: 1.4 }}\r\n                            className=\"sidebar-close\"\r\n                        >\r\n                            <VscChromeClose fill=\"#fff\" size=\"1.4rem\"/>\r\n                        </motion.button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n            <p className=\"text-muted text-center mt-2\">ID: {uid}</p>\r\n            <div className=\"w-100 d-flex justify-content-center mb-3\">\r\n                <Link \r\n                    className=\"text-resp link-button px-3 fw-bold\"\r\n                    to=\"/stats\"\r\n                    onClick={() => dispatch( closeSidebar() )}\r\n                >\r\n                    <IoIosStats />\r\n                    Estadísticas\r\n                </Link>\r\n            </div>\r\n            <div>\r\n                <ButtonGroup aria-label=\"selección\" className=\"w-100\">\r\n                    <button \r\n                        onClick={ () => setState('online')} \r\n                        className={`text-resp button-group w-50 ${state === 'online' && 'button-group-active'} fw-bold text-white`}\r\n                    >\r\n                        Conectados\r\n                    </button>\r\n                    <button \r\n                        onClick={ () => setState('all')} \r\n                        className={`text-resp button-group w-50 ${state === 'all' && 'button-group-active'} fw-bold text-white` }\r\n                    >\r\n                        Todos\r\n                    </button>\r\n                </ButtonGroup>\r\n                {( state === 'online' ) \r\n                ? <Online />\r\n                : <All />\r\n                }\r\n            </div>\r\n        </aside>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { motion } from 'framer-motion';\r\nimport { Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport const MessageReceived = ({text, name, date}) => {\r\n\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText( text ).then(() => {\r\n            Swal.fire('Mensaje copiado')\r\n        })\r\n    }\r\n\r\n    return (\r\n        <motion.div \r\n            animate={{\r\n                scale: [1, 1.1, 1]\r\n            }}\r\n            className=\"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-received\" \r\n        >\r\n            {name && \r\n            <div className=\"text-msg-res fw-bold d-flex justify-content-between align-items-center\" >\r\n                {name}\r\n                <DropdownButton title=\"\" size=\"sm\" id=\"dropdown-item-button\">\r\n                    <Dropdown.Item as=\"button\" onClick={handleCopy} className=\"bg-secondary text-light text-msg-res\">\r\n                        Copiar texto\r\n                    </Dropdown.Item>\r\n                </DropdownButton>\r\n            </div>}\r\n            \r\n            {text}\r\n            <span className=\"text-date d-block text-muted align-self-end\">{date}</span>\r\n        </motion.div>\r\n    )\r\n}\r\n\r\nMessageReceived.propTypes = {\r\n    text: PropTypes.string.isRequired,\r\n    name: PropTypes.string,\r\n    date: PropTypes.string.isRequired\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const MessageSent = ({text, date}) => {\r\n\r\n    return (\r\n        <motion.div \r\n            animate={{\r\n                scale: [1, 1.1, 1]\r\n            }}\r\n            className=\"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-sent\" \r\n        >\r\n            {text}\r\n            <span className=\"text-date d-block text-light align-self-end fz-12px\">{date}</span>\r\n        </motion.div>\r\n    )\r\n}\r\n\r\nMessageSent.propTypes = {\r\n    text: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired\r\n}","import { motion } from 'framer-motion';\r\nimport React from 'react';\r\nimport { Modal } from 'react-bootstrap';\r\nimport { GrClose } from 'react-icons/gr';\r\n\r\nexport const ModalInfo = ({show, handleClose, participants}) => {\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            onHide={handleClose}\r\n            backdrop=\"static\"\r\n            keyboard={false}\r\n        >\r\n            <Modal.Header>\r\n                <Modal.Title>Información</Modal.Title>\r\n                <motion.button \r\n                    onClick={handleClose}\r\n                    className=\"btn\"\r\n                    whileTap={{scale: 1.4}}\r\n                >\r\n                    <GrClose />\r\n                </motion.button>\r\n            </Modal.Header>\r\n            <Modal.Body >\r\n                <h4 className=\"fw-bold text-center\">Participantes</h4>\r\n                {\r\n                !participants \r\n                ?<div className=\"w-100\">\r\n                    <div className=\"alert alert-info text-center text-resp\">\r\n                    Todos los usuarios registrados en <strong>ChatRoom</strong>\r\n                    </div>\r\n                    <img src=\"./assets/chatting-group.svg\" alt=\"chatting-group\" className=\"svg\"/>\r\n                </div>\r\n                : <div className=\"w-100\">\r\n                    <div className=\"alert alert-success text-center\">\r\n                        <strong>{participants[0]} - {participants[1]}</strong>\r\n                    </div>\r\n                    <img src=\"./assets/chatting.svg\" alt=\"chatting\" className=\"svg\"/>\r\n                </div>\r\n                }\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n","import React, { useCallback, useRef, useState } from 'react'\r\nimport { IoIosInformationCircle, IoMdSend } from 'react-icons/io'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { MessageReceived } from '../dashboard/MessageReceived';\r\nimport { MessageSent } from '../dashboard/MessageSent';\r\nimport { motion } from 'framer-motion';\r\nimport { ModalInfo } from './ModalInfo';\r\nimport { AiOutlineMenu } from 'react-icons/ai';\r\nimport { openSidebar } from '../../actions/dashboard';\r\n\r\nexport const Chat = ({ sendMessage, showMenuButton }) => {\r\n\r\n    const [show, setShow] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const textRef = useRef();\r\n    const { messages } = useSelector(state => state.dashboard);\r\n    const { uid } = useSelector(state => state.auth);\r\n    \r\n    const setRef = useCallback( node => {\r\n        if( node ) {\r\n            node.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n    }, [])\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(textRef.current.value === ''){\r\n            textRef.current.value = '';\r\n        } else {\r\n            sendMessage(textRef.current.value);\r\n            textRef.current.value = '';\r\n        }\r\n    }\r\n\r\n    const handleOpen = () => setShow(true);\r\n    const handleClose = () => setShow(false);\r\n\r\n    return (\r\n        <>\r\n        <div className=\"chat w-100\">\r\n            <div className=\"bg-head-chat header-chat\">\r\n                <div className=\"d-flex align-items-center\">\r\n                    <img src=\"./assets/img1.jpg\" alt=\"Foto de perfil de grupo\" className=\"ms-3 img-topbar\"/>\r\n                    <span className=\"text-white fw-bold ms-3 text-resp\">Chat general</span>\r\n                </div>\r\n            \r\n                <div className=\"d-flex align-items-center justify-content-end\">\r\n                    <motion.button \r\n                        onClick={handleOpen}\r\n                        whileTap={ {scale: 2.5} }\r\n                        className=\"button-info mr-1rem\"\r\n                    >\r\n                        <IoIosInformationCircle />\r\n                    </motion.button>\r\n\r\n                    {showMenuButton && \r\n                    <motion.button\r\n                        onClick={() => dispatch( openSidebar() )}\r\n                        whileTap={ {scale: 2.5} }\r\n                        className=\"button-info mr-1rem\"\r\n                    >\r\n                        <AiOutlineMenu />\r\n                    </motion.button>\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className=\"overflow-auto pt-4 bg-chat container-chat\">\r\n                {(messages.length === 0) && \r\n                    <div className=\"alert alert-warning text-center mx-5 text-resp\">Todavía no hay mensajes, comienza escribiendo uno.</div>\r\n                }\r\n                {(messages.length > 0) &&\r\n                    messages.map((message, index) => {\r\n                        const lastMessage = messages.length - 1 === index;\r\n                        if(message.user._id === uid){\r\n                            return <div key={index} className=\"d-flex w-100 align-items-end flex-column\" ref={lastMessage ? setRef : null}>   \r\n                                <MessageSent \r\n                                    key={index} \r\n                                    text={message.message}\r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        } else {\r\n                            return <div key={index} className=\"d-flex w-100 align-items-start flex-column\" ref={lastMessage ? setRef : null}>\r\n                                <MessageReceived \r\n                                    key={index} \r\n                                    text={message.message} \r\n                                    name={message.user.name}\r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        }\r\n                    })\r\n                }\r\n            </div>\r\n           \r\n            <div id=\"chat-input\">\r\n                <form onSubmit={handleSubmit} className=\"h-100 d-flex align-items-center\">\r\n                    <input ref={textRef} type=\"text\" className=\"w-100\" id=\"message-input\" placeholder=\"Escribe un mensaje\" autoComplete=\"off\"/>\r\n                    <button type=\"submit\" id=\"message-submit\" className=\"d-flex align-items-center\"><IoMdSend color=\"#fff\" size=\"18px\"/></button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <ModalInfo handleClose={handleClose} show={show}/>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nChat.propType = {\r\n    sendMessage: PropTypes.func.isRequired\r\n}","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\nimport axios from 'axios';\r\nimport { motion } from 'framer-motion';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { AiOutlineMenu } from 'react-icons/ai';\r\nimport { IoIosInformationCircle, IoMdSend } from 'react-icons/io';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Swal from 'sweetalert2';\r\nimport { addChatMessages, openSidebar } from '../../actions/dashboard';\r\nimport { MessageReceived } from '../dashboard/MessageReceived';\r\nimport { MessageSent } from '../dashboard/MessageSent';\r\nimport { ModalInfo } from './ModalInfo';\r\n\r\nexport const PrivateChat = ({ sendPrivateMessage, showMenuButton }) => {\r\n\r\n    const textRef = useRef();\r\n    const [show, setShow] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const { chatMessages } = useSelector(state => state.dashboard);\r\n    const { uid, name } = useSelector(state => state.auth);\r\n    const dispatch = useDispatch();\r\n\r\n    const setRef = useCallback( node => {\r\n        if( node ) {\r\n            node.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n    }, [])\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(textRef.current.value === ''){\r\n            textRef.current.value = '';\r\n        } else {\r\n            sendPrivateMessage(textRef.current.value);\r\n            textRef.current.value = '';\r\n        }\r\n    }\r\n\r\n    const handleOpen = () => setShow(true);\r\n    const handleClose = () => setShow(false);\r\n\r\n    useEffect(() => {\r\n        //Solo si hay un usuario (chat) seleccionado\r\n        if(selectedUser?.uid) {\r\n            setLoading(true)\r\n            axios.get(`${process.env.REACT_APP_API_URL}/messages/get-all-chat/${uid}/${selectedUser?.uid}`, {\r\n                headers: {\r\n                    'x-token': localStorage.getItem('chat-token'),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then( ( {data} ) => {\r\n                setLoading(false)\r\n                dispatch( addChatMessages(data.messagesChat) )\r\n            }) \r\n            .catch( err => {\r\n                Swal.fire('UPS, hubo un error cargando el chat');\r\n            })\r\n        }\r\n    }, [selectedUser?.uid, selectedUser?.name, uid, dispatch]); \r\n\r\n    return (\r\n        <>\r\n        <div className=\"chat w-100\">\r\n            <div className=\"bg-head-chat header-chat\">\r\n                <div className=\"d-flex align-items-center\">\r\n                        {selectedUser.picture !== 'null' \r\n                            ? <img src={selectedUser.picture} alt={selectedUser.name} className=\"ms-3  img-topbar\"/>\r\n                            : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 img-topbar\"/>\r\n                        }\r\n                    <span className=\"text-white fw-bold ms-3 text-resp\">\r\n                        {selectedUser.name} <i className=\"fas fa-circle mx-2 text-online\"></i>\r\n                    </span>\r\n                </div>\r\n                <div className=\"d-flex align-items-center justify-content-end\">\r\n                    <motion.button \r\n                        onClick={handleOpen}\r\n                        whileTap={ {scale: 2.5} }\r\n                        className=\"button-info mr-1rem\"\r\n                    >\r\n                        <IoIosInformationCircle />\r\n                    </motion.button>\r\n                    {showMenuButton && \r\n                    <motion.button\r\n                            onClick={() => dispatch( openSidebar() )}\r\n                            whileTap={ {scale: 2.5} }\r\n                            className=\"button-info mr-1rem\"\r\n                        >\r\n                        <AiOutlineMenu />\r\n                    </motion.button>\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n            <div className=\"overflow-auto pt-4 bg-chat container-chat\">\r\n            \r\n            {(loading) &&\r\n                <div className=\"w-100 d-flex justify-content-center\">\r\n                    <Spinner animation=\"border\" role=\"status\" variant=\"primary\" />\r\n                </div>\r\n            }\r\n            {(chatMessages && !loading && chatMessages.length === 0) &&\r\n                <div className=\"alert alert-warning text-center text-resp mx-alert\">\r\n                    Aún no tienes mensajes con <strong>{selectedUser?.name}.</strong>\r\n                </div>\r\n            }\r\n            {chatMessages &&\r\n                    chatMessages.map((message, index) => {\r\n                        const lastMessage = chatMessages.length - 1 === index;\r\n                        if(message.recipient !== uid){\r\n                            return <div key={index} className=\"d-flex w-100 align-items-end flex-column\" ref={lastMessage ? setRef : null}>\r\n                                <MessageSent \r\n                                    key={index} \r\n                                    text={message.message}\r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        } else {\r\n                            return <div key={index} className=\"d-flex w-100 align-items-start flex-column\" ref={lastMessage ? setRef : null}>\r\n                                <MessageReceived \r\n                                    key={index} \r\n                                    text={message.message} \r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        }\r\n                    })\r\n                }\r\n            </div>\r\n           \r\n            <div id=\"chat-input\">\r\n                <form onSubmit={handleSubmit} className=\"h-100 d-flex align-items-center\">\r\n                    <input ref={textRef} type=\"text\" className=\"w-100\" id=\"message-input\" placeholder=\"Escribe un mensaje\" autoComplete=\"off\"/>\r\n                    <button type=\"submit\" id=\"message-submit\" className=\"bg-primary\">\r\n                        <IoMdSend color=\"#fff\"/>\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <ModalInfo \r\n            handleClose={handleClose} \r\n            show={show}\r\n            participants={[name, selectedUser?.name]}\r\n        />\r\n        </>\r\n    )\r\n}\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport moment from 'moment'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { io } from 'socket.io-client';\r\nimport { addChatMessages, addMessages, addUsers, addAllUsers } from '../actions/dashboard';\r\nimport { setStats } from '../actions/stats';\r\n\r\nconst SocketContext = React.createContext();\r\n\r\nexport function useSocket() {\r\n    return useContext(SocketContext)\r\n}\r\n\r\nexport const SocketProvider = ( {children} ) => {\r\n\r\n    const [socket, setSocket] = useState();\r\n    const { uid, name, picture } = useSelector(state => state.auth);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const sendMessage = useCallback(( message ) => {\r\n       const now = new Date();\r\n       const date = moment(now).format('LT');\r\n\r\n        socket.emit('send-message',{message, user: uid, date})\r\n    }, [socket, uid]);\r\n\r\n    const sendPrivateMessage = useCallback(( message ) => {\r\n        const now = new Date();\r\n        const date = moment(now).format('LT');\r\n\r\n        socket.emit('send-private-message', [{message, date}, {uid: selectedUser.uid, name: selectedUser.name}]);\r\n    }, [selectedUser?.uid, selectedUser?.name, socket]);\r\n\r\n    useEffect(() => {\r\n        \r\n            const newSocket = io(process.env.REACT_APP_URL, {\r\n            query: { uid, name, picture }\r\n            })\r\n            setSocket(newSocket)     \r\n\r\n        return () => newSocket.close();\r\n    }, [uid, name, picture]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n        socket.on('receive-messages', (payload) => {\r\n            dispatch( addMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('receive-messages')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('created-message', (payload) => {\r\n            dispatch( addMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('created-message')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('active-users', (payload) => {\r\n            dispatch( addUsers(payload) );\r\n        })\r\n\r\n        return () => socket.off('active-users')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('private-messages', (payload) => {\r\n            dispatch( addChatMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('private-messages')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n       if(!socket) return;\r\n\r\n       socket.on('registered-users', (payload) => {\r\n            dispatch( addAllUsers(payload) )\r\n       })\r\n       return () => socket.off('registered-users')\r\n    }, [socket, dispatch])\r\n\r\n  \r\n      useEffect(() => {\r\n        if(!socket) return;\r\n  \r\n        socket.on('get-stats', (payload) => {\r\n            dispatch( setStats(payload) )\r\n        })\r\n  \r\n        return () => socket.off('get-stats')\r\n    }, [socket, dispatch]); \r\n\r\n\r\n    const values = {\r\n        sendMessage,\r\n        sendPrivateMessage\r\n    }\r\n\r\n    return (\r\n        <SocketContext.Provider value={values}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Aside } from './Aside';\r\nimport { AsideResponsive } from './AsideResponsive';\r\nimport { Chat } from './Chat';\r\nimport { selectUser } from '../../actions/dashboard';\r\nimport { PrivateChat } from './PrivateChat';\r\nimport { useSocket } from '../../context/SocketProvider';\r\nimport { Helmet } from 'react-helmet';\r\n\r\n\r\nexport const DashboardScreen = () => {\r\n\r\n    const { name } = useSelector(state => state.auth);\r\n    const [width, setWidth] = useState(window.screen.width);\r\n    const { selectedUser, showSidebar } = useSelector(state => state.dashboard);\r\n    const {sendMessage, sendPrivateMessage} = useSocket();\r\n\r\n    useEffect(() => {\r\n\r\n        const windowResize = (e) => {\r\n            setWidth(e.target.innerWidth)\r\n        }\r\n        \r\n        window.addEventListener('resize', windowResize )\r\n\r\n        return () => window.removeEventListener('resize', windowResize)\r\n\r\n    }, [])\r\n    \r\n    return (  \r\n        <>\r\n            <Helmet>\r\n                <title>{ name } | ChatRoom</title>\r\n                <meta name=\"description\" content=\"Contenido principal del usuario y salas de chat\" />\r\n            </Helmet>\r\n            \r\n            <main>\r\n                <div id=\"container-grid\">\r\n\r\n                    {width > 900 &&\r\n                    <div className=\"p-0 aside-color\">\r\n                        <Aside /> \r\n                    </div>\r\n                    }\r\n\r\n                    {width <= 900 &&\r\n                    <div className={`p-0 aside-color aside-responsive ${showSidebar && 'aside-responsive-show'}`}>\r\n                        <AsideResponsive />\r\n                    </div>\r\n                    }\r\n\r\n\r\n                    <div className=\"p-0 d-flex\">\r\n                        <div className=\"d-flex column-chat-dimensions\" id=\"chat\">\r\n                            {selectedUser?.uid && selectUser?.name \r\n                            ? <PrivateChat \r\n                                sendPrivateMessage={sendPrivateMessage} \r\n                                showMenuButton={ width < 900 ? true : false } \r\n                            />\r\n                            : <Chat \r\n                                sendMessage={sendMessage} \r\n                                showMenuButton={ width < 900 ? true : false }\r\n                            />\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </>\r\n        \r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Col, Container, Row } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { BsFillCaretLeftFill } from 'react-icons/bs';\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nexport const StatisticsScreen = () => {\r\n\r\n    const {countMessages} = useSelector(state => state.stats)\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Stats | ChatRoom</title>\r\n                <meta name=\"description\" content=\"Estadisticas del chat general\" />\r\n            </Helmet>\r\n\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col md={12} className=\"p-0 bg-dark\">\r\n                        <div className=\"container-full\">\r\n                            <div className=\"px-3 py-2 bg-head-chat header-stats\">\r\n                            <Link \r\n                                className=\"text-resp link-button px-3 fw-bold\"\r\n                                to=\"/\"\r\n                            >\r\n                                <BsFillCaretLeftFill /> Inicio\r\n                            </Link>\r\n                            </div>\r\n                            <h3 className=\"text-resp text-white text-center mt-5\">Usuarios que más mensajes han enviado</h3>\r\n                            <h4 className=\"text-resp text-info text-center mb-5\">En el chat general</h4>\r\n                            <ResponsiveContainer width=\"90%\" height=\"50%\" className=\"text-resp\">\r\n                                <BarChart\r\n                                    width={500}\r\n                                    height={300}\r\n                                    data={countMessages}\r\n                                    margin={{\r\n                                        top: 5,\r\n                                        right: 5,\r\n                                        left: 5,\r\n                                        bottom: 5,\r\n                                    }}\r\n                                >\r\n                                    <XAxis dataKey=\"name\" />\r\n                                    <YAxis />\r\n                                    <Tooltip />\r\n                                    <Legend />\r\n                                    <Bar dataKey=\"messages\" fill=\"#8884d8\" />\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport { FcGoogle } from 'react-icons/fc';\r\nimport { useDispatch } from 'react-redux';\r\nimport { login } from '../../actions/auth';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const GoogleButton = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const clientId = '257430794857-ifhr62u2i59t0snq8a3q4gns6k8or9a6.apps.googleusercontent.com';\r\n    \r\n    const url = ( window.location.hostname.includes('localhost') )\r\n                ? 'http://localhost:5000/api/auth/google'\r\n                : 'https://room-chat-dan.herokuapp.com/api/auth/google'\r\n\r\n    const doFetch = async (id_token) => {\r\n        const data = { id_token }\r\n        fetch( url, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then( res => res.json() )\r\n        .then( ({uid, name, email, google, picture, token}) => {\r\n            dispatch( login({uid, name, email, google, picture}) );\r\n            localStorage.setItem('chat-token', token)\r\n        })\r\n        .catch( console.log )\r\n    }\r\n\r\n    const onSuccess = async (res) => {\r\n        const {tokenId} = res;\r\n        await doFetch(tokenId);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <GoogleLogin\r\n                clientId={clientId}\r\n                buttonText=\"Iniciar sesión con Google\"\r\n                onSuccess={onSuccess}\r\n                cookiePolicy={'single_host_origin'}\r\n                className=\"mt-3 w-100 text-center\"\r\n                render={renderProps => (\r\n                    <motion.div \r\n                        whileTap={{ scale: 1.1 }}\r\n                        onClick={renderProps.onClick} \r\n                        disabled={renderProps.disabled}\r\n                        className=\"google-btn\"\r\n                    >\r\n                        <div className=\"logo\">\r\n                            <FcGoogle size=\"1.7rem\"/>\r\n                        </div>\r\n                        <div className=\"l-text\">Ingresar con Google</div>\r\n                    </motion.div>\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, Container, Form } from 'react-bootstrap';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {Helmet} from \"react-helmet\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { startLogin } from '../../actions/auth';\r\nimport { GoogleButton } from './GoogleButton';\r\n\r\nexport const LoginScreen = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n     //Validación del formulario\r\n     const formik = useFormik({\r\n        initialValues: {\r\n            email: '',\r\n            password: ''\r\n        },\r\n        validationSchema: Yup.object({\r\n            email: Yup.string()\r\n                    .email( true )\r\n                    .required( true ),\r\n            password: Yup.string()\r\n                    .required( true )\r\n                    .min(8, true)\r\n        }),\r\n        onSubmit : (values) => {\r\n\r\n            const { email, password } = values;\r\n           \r\n            dispatch( startLogin(email, password) );\r\n        }   \r\n    });\r\n\r\n    \r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>Chat | Login</title>\r\n                <meta name=\"description\" content=\"Inicio de sesión\" />\r\n            </Helmet>\r\n\r\n            <Container fluid className=\"bg-dark d-flex justify-content-center align-items-center container-full\">\r\n                <div className=\"form\">\r\n                    <Form onSubmit={formik.handleSubmit} className=\"animate__animated animate__fadeIn\">\r\n                        <h2 className=\"text-white text-start texto mb-0\">ChatRoom</h2>\r\n                        <p className=\"text-muted text-end\">por Daniel Díaz</p>\r\n                        <h4 className=\"text-white lead\">Inicio de sesión</h4>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                autoComplete=\"off\"\r\n                                name=\"email\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"email\" \r\n                                placeholder=\"Correo\" \r\n                                value={ formik.values.email }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={ formik.errors.email }\r\n                            />\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Control \r\n                                name=\"password\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"password\" \r\n                                placeholder=\"Contraseña\" \r\n                                value={ formik.values.password }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={ formik.errors.password }\r\n                            />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\" variant=\"outline-primary\" className=\"w-100 mt-3\">\r\n                            Ingresar\r\n                        </Button>\r\n                        <GoogleButton />\r\n                        {/* <FacebookButton /> */}\r\n                        <Link to=\"/auth/register\" className=\"d-inline-block mt-3\">Si no tienes una cuenta</Link>\r\n                    </Form>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, Container, Form } from 'react-bootstrap';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { startRegister } from '../../actions/auth';\r\n\r\nexport const RegisterScreen = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n     //Validación del formulario\r\n     const formik = useFormik({\r\n        initialValues: {\r\n            name: '',\r\n            email: '',\r\n            password: ''\r\n        },\r\n        validationSchema: Yup.object({\r\n            name: Yup.string()\r\n                    .required( true )\r\n                    .min(3, true),\r\n            email: Yup.string()\r\n                    .email( true )\r\n                    .required( true ),\r\n            password: Yup.string()\r\n                    .required( true )\r\n                    .min(8, true)\r\n        }),\r\n        onSubmit : (values) => {\r\n\r\n            const { name, email, password } = values;\r\n           \r\n            dispatch( startRegister(name, email, password) );\r\n        }   \r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>Chat | Register</title>\r\n                <meta name=\"description\" content=\"Registro de nuevo usuario\" />\r\n            </Helmet>\r\n\r\n            <Container fluid className=\"bg-dark d-flex flex-column justify-content-center align-items-center container-full\">\r\n                \r\n                <div className=\"form\">\r\n                    <Form onSubmit={formik.handleSubmit} className=\"animate__animated animate__fadeIn\">\r\n                        <h2 className=\"text-white text-start texto mb-0\">ChatRoom</h2>\r\n                        <p className=\"text-muted text-end\">por Daniel Díaz</p>\r\n                        <h4 className=\"text-white lead mt-3\">Registro</h4>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                    autoComplete=\"off\"\r\n                                    name=\"name\"\r\n                                    className=\"bg-dark text-white\" \r\n                                    type=\"text\" \r\n                                    placeholder=\"Nombre\" \r\n                                    value={ formik.values.name }\r\n                                    onChange={ formik.handleChange }\r\n                                    onBlur={ formik.handleBlur }\r\n                                    isInvalid={formik.errors.name}\r\n                                />\r\n                        </Form.Group>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                    autoComplete=\"off\"\r\n                                    name=\"email\"\r\n                                    className=\"bg-dark text-white\" \r\n                                    type=\"email\" \r\n                                    placeholder=\"Correo\"  \r\n                                    value={ formik.values.email }\r\n                                    onChange={ formik.handleChange }\r\n                                    onBlur={ formik.handleBlur }\r\n                                    isInvalid={formik.errors.email}\r\n                                />\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Control \r\n                                    name=\"password\"\r\n                                    className=\"bg-dark text-white\" \r\n                                    type=\"password\" \r\n                                    placeholder=\"Contraseña\" \r\n                                    value={ formik.values.password }\r\n                                    onChange={ formik.handleChange }\r\n                                    onBlur={ formik.handleBlur }\r\n                                    isInvalid={formik.errors.password}\r\n                                />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\" variant=\"outline-primary\" className=\"w-100 mt-3\">\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link to=\"/auth/login\" className=\"d-inline-block mt-3\">Si ya tienes una cuenta</Link>\r\n                    </Form>\r\n                </div>\r\n            </Container>\r\n        </>\r\n        \r\n    )\r\n}\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Switch, Route, Redirect,} from \"react-router-dom\";\r\nimport { LoginScreen } from '../components/auth/LoginScreen';\r\nimport { RegisterScreen } from '../components/auth/RegisterScreen';\r\n\r\n\r\nexport const AuthRouter = () => {\r\n    return (\r\n        <Router>\r\n            <Switch>\r\n\r\n                <Route \r\n                    path=\"/auth/login\"\r\n                    component={LoginScreen}\r\n                />\r\n\r\n                <Route \r\n                    path=\"/auth/register\"\r\n                    component={RegisterScreen}\r\n                />\r\n\r\n                <Redirect to=\"/auth/login\" />\r\n\r\n            </Switch>\r\n        </Router>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component : Component,\r\n    ...rest\r\n}) => {\r\n\r\n    return (\r\n        <Route {...rest}\r\n            component={ (props) => (\r\n                ( isAuthenticated )\r\n                    ? ( <Component { ...props } /> )\r\n                    : ( <Redirect to=\"/login\" /> )\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component : Component,\r\n    ...rest\r\n}) => {\r\n\r\n\r\n\r\n    return (\r\n        <Route {...rest}\r\n            component={ (props) => (\r\n                ( isAuthenticated )\r\n                    ? ( <Redirect to=\"/\" /> )\r\n                    : ( <Component { ...props } /> )\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { BrowserRouter as Router, Switch, Redirect } from \"react-router-dom\";\r\nimport { startChecking } from '../actions/auth';\r\n\r\nimport { DashboardScreen } from '../components/dashboard/DashboardScreen';\r\nimport { StatisticsScreen } from '../components/statistics/StatisticsScreen';\r\nimport { SocketProvider } from '../context/SocketProvider';\r\nimport { AuthRouter } from './AuthRouter';\r\nimport { PrivateRoute } from './PrivateRoute';\r\nimport { PublicRoute } from './PublicRoute';\r\n\r\n\r\nexport const AppRouter = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { checking, uid } = useSelector(state => state.auth);\r\n\r\n    //se verifica el token cada vez que se renderiza de nuevo el AppRouter\r\n    useEffect(() => {\r\n        \r\n        dispatch( startChecking() );\r\n\r\n    }, [dispatch]);\r\n\r\n    if( checking ) {\r\n        return(\r\n            <div className=\"flexible\">\r\n                <div className=\"sk-chase\">\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <SocketProvider>\r\n             <Router>\r\n                <Switch>\r\n\r\n                    <PublicRoute \r\n                        isAuthenticated={!!uid}\r\n                        path=\"/auth\"\r\n                        component={ AuthRouter }\r\n                    />\r\n\r\n                    <PrivateRoute \r\n                        isAuthenticated={!!uid}\r\n                        exact\r\n                        path=\"/\" \r\n                        component={ DashboardScreen }\r\n                    />\r\n\r\n                    <PrivateRoute\r\n                        isAuthenticated={!!uid}\r\n                        path=\"/stats\"\r\n                        component={ StatisticsScreen }\r\n                    />\r\n\r\n                    <Redirect to=\"/auth/login\" />\r\n\r\n                </Switch>\r\n            </Router>\r\n        </SocketProvider>\r\n    )\r\n}\r\n","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    checking: true,\r\n}\r\n\r\nexport const authReducer = (state= initialState, action) => {\r\n    switch (action.type) {\r\n        case types.authLogin:\r\n            return {\r\n                ...state,\r\n                checking: false,\r\n                ...action.payload\r\n            }    \r\n\r\n        case types.authLogout:\r\n            return {\r\n                checking: false\r\n            }\r\n            \r\n        case types.authCheckingJWTFinish:\r\n            return {\r\n                ...state,\r\n                checking: false\r\n            }\r\n        case types.newUser: \r\n            return {\r\n                ...state,\r\n                newUser: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    messages: [],\r\n    users: [],\r\n    selectedUser: {},\r\n    chatMessages: [],\r\n    allUsers: [],\r\n}\r\n\r\nexport const dashboardReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case types.addMessages:\r\n            return {\r\n                ...state,\r\n                messages: action?.payload ? action.payload : []\r\n            }\r\n        case types.addUsers:\r\n            return {\r\n                ...state,\r\n                users: action.payload\r\n            }\r\n        case types.cleanDashboard: \r\n            return {\r\n                messages: [],\r\n                users: []\r\n            }\r\n        case types.selectUser: \r\n            return {\r\n                ...state,\r\n                selectedUser: action.payload\r\n            }\r\n        case types.addChatMessages: \r\n            return {\r\n                ...state,\r\n                chatMessages: action.payload\r\n            }\r\n        case types.addAllUsers: \r\n            return {\r\n                ...state,\r\n                allUsers: action.payload\r\n            }\r\n        case types.openSidebar: \r\n            return {\r\n                ...state,\r\n                showSidebar: true\r\n            }\r\n        case types.closeSidebar: \r\n            return {\r\n                ...state,\r\n                showSidebar: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    countMessages: []\r\n}\r\n\r\nexport const statsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case types.loadStats:\r\n            return {\r\n                ...state,\r\n                countMessages: action.payload\r\n            }\r\n        case types.cleanStats:\r\n            return {\r\n                countMessages: []\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { authReducer } from '../reducers/authReducer';\r\nimport { dashboardReducer } from '../reducers/dashboardReducer';\r\nimport { statsReducer } from '../reducers/statsReducer';\r\n\r\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\n\r\nconst reducers = combineReducers({\r\n    auth: authReducer,\r\n    dashboard: dashboardReducer,\r\n    stats: statsReducer\r\n})\r\n\r\nexport const store = createStore(\r\n    reducers,\r\n    composeEnhancers( applyMiddleware(thunk) )\r\n)","import { AppRouter } from './router/AppRouter';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport './css/app.css';\r\nimport 'animate.css';\r\n\r\nfunction App() {\r\n\r\n  return(\r\n    <Provider store={ store }>\r\n      <AppRouter />    \r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/js/dist/dropdown';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}