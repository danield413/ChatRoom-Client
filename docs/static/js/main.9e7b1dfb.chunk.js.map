{"version":3,"sources":["types/types.js","actions/auth.js","actions/dashboard.js","components/dashboard/Online.js","components/dashboard/All.js","actions/stats.js","helpers/cutName.js","components/dashboard/HeaderAside.js","components/dashboard/LinkButton.js","components/dashboard/AsideInfo.js","components/dashboard/Aside.js","components/dashboard/AsideResponsive.js","components/dashboard/MessageReceived.js","components/dashboard/MessageSent.js","components/dashboard/ModalInfo.js","components/dashboard/ChatInput.js","components/dashboard/HeaderInfoChat.js","components/dashboard/Chat.js","components/dashboard/PrivateChat.js","context/SocketProvider.js","components/dashboard/DashboardScreen.js","components/statistics/StatisticsScreen.js","components/auth/GoogleButton.js","components/auth/LogoForm.js","components/auth/LoginScreen.js","components/auth/RegisterScreen.js","router/AuthRouter.js","router/PrivateRoute.js","router/PublicRoute.js","router/AppRouter.js","reducers/authReducer.js","reducers/dashboardReducer.js","reducers/statsReducer.js","store/store.js","App.js","index.js"],"names":["types","login","data","type","payload","newUser","checkingFinish","logout","addMessages","addChatMessages","selectUser","openSidebar","closeSidebar","cleanDashboard","Online","dispatch","useDispatch","uid","useSelector","state","auth","selectedUser","dashboard","users","className","onClick","name","src","alt","map","user","id","picture","All","allUsers","cleanStats","cutName","split","HeaderAside","LinkBtn","styled","a","LinkButton","to","text","history","useHistory","push","AsideInfo","Aside","useState","setState","userLeaves","useCallback","find","useEffect","DropdownButton","title","variant","Dropdown","ItemText","Item","as","localStorage","removeItem","ButtonGroup","aria-label","AsideResponsive","motion","button","whileTap","scale","fill","size","MessageReceived","date","div","animate","navigator","clipboard","writeText","then","Swal","fire","MessageSent","ModalInfo","show","handleClose","participants","Modal","onHide","backdrop","keyboard","Header","Title","Body","length","Footer","WrapperInput","MessageInput","input","MessageSubmit","ChatInput","handleSubmit","textRef","onSubmit","ref","placeholder","autoComplete","color","HeaderInfoChat","location","Chat","sendMessage","showMenuButton","setShow","useRef","messages","setRef","node","scrollIntoView","behavior","message","index","lastMessage","_id","e","preventDefault","current","value","propType","PropTypes","func","isRequired","PrivateChat","sendPrivateMessage","loading","setLoading","chatMessages","axios","get","process","headers","getItem","messagesChat","catch","err","Spinner","animation","role","recipient","SocketContext","React","createContext","SocketProvider","children","socket","setSocket","now","Date","moment","format","emit","newSocket","io","query","close","on","off","addUsers","addAllUsers","setStats","values","Provider","DashboardScreen","window","screen","width","setWidth","showSidebar","useContext","windowResize","target","innerWidth","addEventListener","removeEventListener","Helmet","content","StatisticsScreen","countMessages","stats","Container","fluid","Row","Col","md","ResponsiveContainer","height","BarChart","margin","top","right","left","bottom","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","Div","Logo","Text","GoogleButton","url","hostname","includes","doFetch","id_token","fetch","method","body","JSON","stringify","res","json","email","google","token","setItem","console","log","onSuccess","tokenId","clientId","cookiePolicy","render","renderProps","disabled","Link","LogoForm","href","LoginScreen","formik","useFormik","initialValues","password","validationSchema","Yup","required","min","post","ok","msg","startLogin","charSet","Form","Group","Control","onChange","handleChange","onBlur","handleBlur","isInvalid","errors","Button","RegisterScreen","position","icon","showConfirmButton","timer","startRegister","AuthRouter","path","component","PrivateRoute","isAuthenticated","Component","rest","props","PublicRoute","AppRouter","checking","exact","initialState","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","reducers","combineReducers","action","store","createStore","applyMiddleware","thunk","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9e7b1dfb.chunk.js","sourcesContent":["export const types = {\r\n    authCheckingJWTFinish: \"AUTH checking JWT finish\",\r\n    authLogin: \"AUTH login\",\r\n    authLogout: \"AUTH logout\",\r\n    newUser: \"AUTH new user\",\r\n\r\n    addMessages: \"DASHBOARD add messages\",\r\n    addChatMessages: \"DASHBOARD add chat messages\",\r\n    addUsers: \"DASHBOARD add users\",\r\n    cleanDashboard: \"DASHBOARD clean\",\r\n    selectUser: \"DASHBOARD select user\",\r\n    addAllUsers: \"DASHBOARD add all registered users\",\r\n    openSidebar: \"DASHBOARD open sidebar\",\r\n    closeSidebar: \"DASHBOARD close sidebar\",\r\n    \r\n    loadStats: \"STATS load stats\",\r\n    cleanStats: \"STATS clean stats\",\r\n}","import axios from \"axios\";\r\nimport Swal from 'sweetalert2'\r\nimport { types } from \"../types/types\";\r\n\r\nexport const startLogin = ( email, password ) => {\r\n    return async(dispatch) => {\r\n\r\n        const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/login`, {\r\n            email, password\r\n        })\r\n\r\n        if(data.ok){\r\n            localStorage.setItem('chat-token', data.token);\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n            }))\r\n        } else {\r\n            Swal.fire('Error', data.msg, 'error');\r\n        }\r\n    }\r\n}\r\n\r\nexport const login = ( data ) => ({\r\n    type: types.authLogin,\r\n    payload: data\r\n});\r\n\r\nexport const startRegister = ( name, email, password ) => {\r\n    return async(dispatch) => {\r\n        const { data } = await axios.post(`${process.env.REACT_APP_API_URL}/auth/register`, {\r\n            name, email, password\r\n        });\r\n \r\n        if(data.ok) {\r\n            localStorage.setItem('chat-token', data.token);\r\n            \r\n            dispatch( newUser() );\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n                picture: data.user.picture\r\n            }));\r\n\r\n            Swal.fire({\r\n                position: 'bottom-end',\r\n                icon: 'success',\r\n                title: 'Cuenta creada',\r\n                showConfirmButton: false,\r\n                timer: 1500\r\n            })\r\n        } else {\r\n            Swal.fire('Error', data.msg, 'error')\r\n        } \r\n\r\n    }\r\n}\r\n\r\nexport const startChecking = () => {\r\n    return async(dispatch) => {\r\n        const { data } = await axios.get(`${process.env.REACT_APP_API_URL}/auth/renew`,{\r\n            headers: {\r\n                'x-token': localStorage.getItem('chat-token'),\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        if(data.ok) {\r\n            localStorage.setItem('chat-token', data.token);\r\n\r\n            dispatch( login({\r\n                uid: data.user.uid,\r\n                name: data.user.name,\r\n                email: data.user.email,\r\n                picture: data.user.picture\r\n            }))\r\n        } else {\r\n            dispatch( checkingFinish() )\r\n        }\r\n    }\r\n}\r\n\r\nconst newUser = () => ({ type: types.newUser })\r\n\r\nconst checkingFinish = () => ({ type: types.authCheckingJWTFinish })\r\n\r\nexport const logout = () => ({type: types.authLogout})\r\n","import { types } from \"../types/types\";\r\n\r\n\r\nexport const addMessages = ( payload ) => ({\r\n    type: types.addMessages,\r\n    payload\r\n})\r\n\r\nexport const addChatMessages = (payload) => ({\r\n    type: types.addChatMessages,\r\n    payload\r\n})\r\n\r\nexport const addUsers = ( payload ) => ({\r\n    type: types.addUsers,\r\n    payload\r\n})\r\n\r\nexport const selectUser = ( payload ) => ({\r\n    type: types.selectUser,\r\n    payload\r\n})\r\n\r\nexport const addAllUsers = ( payload ) => ({\r\n    type: types.addAllUsers,\r\n    payload\r\n})\r\n\r\nexport const openSidebar = () => ({ type: types.openSidebar })\r\nexport const closeSidebar = () => ({ type: types.closeSidebar })\r\n\r\nexport const cleanDashboard = () => ({ type: types.cleanDashboard })","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { closeSidebar, selectUser } from '../../actions/dashboard';\r\n\r\nexport const Online = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { uid } = useSelector(state => state.auth);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const { users } = useSelector(state => state.dashboard);\r\n\r\n    return (\r\n        <>\r\n            <h6 className=\"lead ms-4 my-3 \"><strong className=\"text-light text-resp\">Conectados</strong></h6>\r\n                <button \r\n                    onClick={ () => {\r\n                        dispatch( selectUser({}) )\r\n                        dispatch( closeSidebar() )\r\n                    }}\r\n                    className={`text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ${!selectedUser?.name && !selectedUser?.uid ? 'user-sidebar-active' : ''}`} \r\n                >\r\n                    <img src=\"./assets/img1.jpg\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                    <span className=\"fw-bold text-resp\">Chat general <i className=\"fas fa-circle mx-2 fz-12px text-online\" ></i></span>\r\n                </button>\r\n                <div className=\"w-100 overflow-auto online-height\">\r\n                    {users &&\r\n                        users.map(user => (\r\n                            (user?.id !== uid) &&\r\n                                <button \r\n                                    key={user.id} \r\n                                    onClick={ () => {\r\n                                        dispatch( selectUser({ uid: user?.id, name: user?.name, picture: user?.picture }) )\r\n                                        dispatch( closeSidebar() )\r\n                                    } }\r\n                                    className={`text-resp text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ${user.id === selectedUser?.uid ? 'user-sidebar-active' : ''}`} \r\n                                >\r\n                                    {(user.picture !== 'undefined' && user.picture !== 'null')\r\n                                        ? <img src={user.picture} alt={user.name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                                        : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                                    }\r\n                                    <span className=\"fw-bold text-resp\">{user.name} <i className=\"fas fa-circle mx-2 text-online\"></i></span>\r\n                                </button>\r\n                        ))\r\n                    }\r\n                </div>\r\n                    \r\n        </>\r\n    )\r\n}\r\n ","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const All = () => {\r\n\r\n    const { allUsers } = useSelector(state => state.dashboard);\r\n    const { uid } = useSelector(state => state.auth);\r\n\r\n    return (\r\n        <>\r\n            <h5 className=\"lead ms-4 my-3\"><strong className=\"text-light text-resp\">Todos</strong></h5>\r\n            <div className=\"w-100 overflow-auto all-height\">\r\n            {allUsers &&\r\n                allUsers.map(user => (\r\n                    (user?.id !== uid) &&\r\n                        <button \r\n                            key={user.uid} \r\n                            className=\"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar\" \r\n                        >\r\n                            {user.picture \r\n                                ? <img src={user?.picture} alt={user?.name} className=\"ms-3 mr-10 img-topbar\"/>\r\n                                : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 mr-10 img-topbar\"/>\r\n                            }\r\n                            <span className=\"fw-bold\">{user.name}</span>\r\n                        </button>\r\n                ))\r\n            }\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import { types } from \"../types/types\";\r\n\r\nexport const setStats = (payload) => ({\r\n    type: types.loadStats,\r\n    payload\r\n})\r\n\r\nexport const cleanStats = () => ({ type: types.cleanStats })","\r\n\r\nexport const cutName = (name) => {\r\n    if(name) {\r\n        const split = name.split(' ');\r\n        return split[0];\r\n    }\r\n}","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { cutName } from '../../helpers/cutName';\r\n\r\nexport const HeaderAside = () => {\r\n\r\n    const { name, picture } = useSelector(state => state.auth);\r\n\r\n    return (\r\n        <div>\r\n            {picture \r\n            ? <img src={picture} alt={name} className=\"ms-3 mr-10 img-topbar\"/>\r\n            : <img src=\"./assets/default-user.png\" alt={name} className=\"ms-3 mr-10 img-topbar\"/>\r\n            }\r\n            <span className=\"fw-bold text-white\">\r\n                {cutName(name)}\r\n                <i className=\"fas fa-circle mx-2 text-online\"></i>\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { useDispatch } from 'react-redux';\r\nimport { closeSidebar } from '../../actions/dashboard';\r\nimport { IoIosStats } from 'react-icons/io';\r\nimport { BsFillCaretLeftFill } from 'react-icons/bs';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LinkBtn = styled.a`\r\n    border: 2px solid cyan;\r\n    background-color: transparent;\r\n    color: cyan;\r\n    padding: 5px 10px;\r\n    border-radius: 5px;\r\n    transition: 0.2s ease-in;\r\n    text-decoration: none;\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: cyan;\r\n        color: black;\r\n    }\r\n`\r\n\r\nexport const LinkButton = ({to, text}) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const redirect = () => {\r\n        history.push( to );\r\n    }\r\n\r\n    return (\r\n        <LinkBtn\r\n            className=\"text-resp link-button px-3 fw-bold\"\r\n            onClick={() => {\r\n                dispatch(closeSidebar())\r\n                redirect()\r\n            }}\r\n        >\r\n            {text === 'Estadísticas'\r\n            ? <IoIosStats />\r\n            : <BsFillCaretLeftFill />\r\n            }\r\n            {text}\r\n        </LinkBtn>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { LinkButton } from './LinkButton'\r\n\r\nexport const AsideInfo = ({uid}) => {\r\n    return (\r\n        <>\r\n            <p className=\"text-muted text-center mt-2\">ID: {uid}</p>\r\n            <div className=\"w-100 d-flex justify-content-center mb-3\">\r\n                <LinkButton to=\"/stats\" text=\"Estadísticas\"/>\r\n            </div> \r\n        </>\r\n    )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { ButtonGroup, Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport { AiTwotoneSetting } from 'react-icons/ai'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { logout } from '../../actions/auth'\r\nimport { cleanDashboard, selectUser } from '../../actions/dashboard';\r\nimport { Online } from './Online';\r\nimport { All } from './All';\r\nimport { cleanStats } from '../../actions/stats';\r\nimport { HeaderAside } from './HeaderAside';\r\nimport { AsideInfo } from './AsideInfo';\r\n\r\nexport const Aside = () => {\r\n\r\n    const [state, setState] = useState('online')\r\n    const dispatch = useDispatch();\r\n    const { uid } = useSelector(state => state.auth);\r\n    const { users } = useSelector(state => state.dashboard);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n\r\n    const userLeaves = useCallback(() => {\r\n        const u = users.find( user => user.id === selectedUser?.uid );\r\n        if(!u) {\r\n            dispatch( selectUser({}) )\r\n        }\r\n    }, [users, selectedUser?.uid, dispatch])\r\n\r\n    useEffect(() => {\r\n       userLeaves()\r\n    }, [users, userLeaves])\r\n    \r\n    const handleLogout = () => {\r\n        dispatch( logout() );\r\n        dispatch( cleanDashboard() );\r\n        dispatch( cleanStats() );\r\n        localStorage.removeItem('chat-token');\r\n    }\r\n\r\n    return (\r\n        <aside className=\"h-100\">\r\n            <header>\r\n                <div className=\"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height\">\r\n                   \r\n                   <HeaderAside />\r\n                    \r\n                    <DropdownButton title={<AiTwotoneSetting />} id=\"dropdown-item-button\" variant=\"dark\" className=\"bg-dark d-inline\">\r\n                        <Dropdown.ItemText className=\"bg-secondary text-light\">\r\n                            <strong>Opciones</strong>\r\n                        </Dropdown.ItemText>\r\n                        <Dropdown.Item as=\"button\" onClick={handleLogout} className=\"bg-secondary text-light\">\r\n                            Salir\r\n                        </Dropdown.Item>\r\n                    </DropdownButton>\r\n                        \r\n                </div>\r\n            </header>\r\n\r\n            <AsideInfo uid={uid} />\r\n            \r\n            <div>\r\n                <ButtonGroup aria-label=\"selección\" className=\"w-100\">\r\n                    <button \r\n                        onClick={ () => setState('online')} \r\n                        className={`button-group w-50 text-resp ${state === 'online' && 'button-group-active'} fw-bold text-white`}\r\n                    >\r\n                        Conectados\r\n                    </button>\r\n                    <button \r\n                        onClick={ () => setState('all')} \r\n                        className={`button-group w-50 text-resp ${state === 'all' && 'button-group-active'} fw-bold text-white` }\r\n                    >\r\n                        Todos\r\n                    </button>\r\n                </ButtonGroup>\r\n                {( state === 'online' ) \r\n                ? <Online />\r\n                : <All />\r\n                }\r\n            </div>\r\n        </aside>\r\n    )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { ButtonGroup, Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport { AiTwotoneSetting } from 'react-icons/ai'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { logout } from '../../actions/auth'\r\nimport { cleanDashboard, closeSidebar, selectUser } from '../../actions/dashboard';\r\nimport { Online } from './Online';\r\nimport { All } from './All';\r\nimport { cleanStats } from '../../actions/stats';\r\nimport { VscChromeClose } from 'react-icons/vsc';\r\nimport { motion } from 'framer-motion';\r\nimport { HeaderAside } from './HeaderAside';\r\nimport { AsideInfo } from './AsideInfo';\r\n\r\nexport const AsideResponsive = () => {\r\n\r\n    const [state, setState] = useState('online')\r\n    const dispatch = useDispatch();\r\n    const { uid } = useSelector(state => state.auth);\r\n    const { users } = useSelector(state => state.dashboard);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n\r\n    const userLeaves = useCallback(() => {\r\n        const u = users.find( user => user.id === selectedUser?.uid );\r\n        if(!u) {\r\n            dispatch( selectUser({}) )\r\n        }\r\n    }, [users, selectedUser?.uid, dispatch])\r\n\r\n    useEffect(() => {\r\n       userLeaves()\r\n    }, [users, userLeaves])\r\n    \r\n    const handleLogout = () => {\r\n        dispatch( logout() );\r\n        dispatch( cleanDashboard() );\r\n        dispatch( cleanStats() );\r\n        localStorage.removeItem('chat-token');\r\n    }\r\n\r\n    return (\r\n        <aside className=\"h-100\">\r\n            <header>\r\n                <div className=\"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height\">\r\n                    \r\n                   <HeaderAside />\r\n                    \r\n                    <div>\r\n                        <DropdownButton title={<AiTwotoneSetting />} id=\"dropdown-item-button\" variant=\"dark\" className=\"bg-dark d-inline\">\r\n                            <Dropdown.ItemText className=\"bg-secondary text-light text-resp\">\r\n                                <strong>Opciones</strong>\r\n                            </Dropdown.ItemText>\r\n                            <Dropdown.Item as=\"button\" onClick={handleLogout} className=\"bg-secondary text-light text-resp\">\r\n                                Salir\r\n                            </Dropdown.Item>\r\n                        </DropdownButton>\r\n                        <motion.button \r\n                            onClick={() => dispatch( closeSidebar() ) }\r\n                            whileTap={{ scale: 1.4 }}\r\n                            className=\"sidebar-close\"\r\n                        >\r\n                            <VscChromeClose fill=\"#fff\" size=\"1.4rem\"/>\r\n                        </motion.button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n            \r\n            <AsideInfo uid={uid} />\r\n\r\n            <div>\r\n                <ButtonGroup aria-label=\"selección\" className=\"w-100\">\r\n                    <button \r\n                        onClick={ () => setState('online')} \r\n                        className={`text-resp button-group w-50 ${state === 'online' && 'button-group-active'} fw-bold text-white`}\r\n                    >\r\n                        Conectados\r\n                    </button>\r\n                    <button \r\n                        onClick={ () => setState('all')} \r\n                        className={`text-resp button-group w-50 ${state === 'all' && 'button-group-active'} fw-bold text-white` }\r\n                    >\r\n                        Todos\r\n                    </button>\r\n                </ButtonGroup>\r\n                {( state === 'online' ) \r\n                ? <Online />\r\n                : <All />\r\n                }\r\n            </div>\r\n        </aside>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { motion } from 'framer-motion';\r\nimport { Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport const MessageReceived = ({text, name, date}) => {\r\n\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText( text ).then(() => {\r\n            Swal.fire('Mensaje copiado')\r\n        })\r\n    }\r\n\r\n    return (\r\n        <motion.div \r\n            animate={{\r\n                scale: [1, 1.1, 1]\r\n            }}\r\n            className=\"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-received\" \r\n        >\r\n            {name && \r\n            <div className=\"text-msg-res fw-bold d-flex justify-content-between align-items-center\" >\r\n                {name}\r\n                <DropdownButton title=\"\" size=\"sm\" id=\"dropdown-item-button\">\r\n                    <Dropdown.Item as=\"button\" onClick={handleCopy} className=\"bg-secondary text-light text-msg-res\">\r\n                        Copiar texto\r\n                    </Dropdown.Item>\r\n                </DropdownButton>\r\n            </div>}\r\n            \r\n            {text}\r\n            <span className=\"text-date d-block text-muted align-self-end\">{date}</span>\r\n        </motion.div>\r\n    )\r\n}\r\n\r\nMessageReceived.propTypes = {\r\n    text: PropTypes.string.isRequired,\r\n    name: PropTypes.string,\r\n    date: PropTypes.string.isRequired\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const MessageSent = ({text, date}) => {\r\n\r\n    return (\r\n        <motion.div \r\n            animate={{\r\n                scale: [1, 1.1, 1]\r\n            }}\r\n            className=\"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-sent\" \r\n        >\r\n            {text}\r\n            <span className=\"text-date d-block text-light align-self-end fz-12px\">{date}</span>\r\n        </motion.div>\r\n    )\r\n}\r\n\r\nMessageSent.propTypes = {\r\n    text: PropTypes.string.isRequired,\r\n    date: PropTypes.string.isRequired\r\n}","import { motion } from 'framer-motion';\r\nimport React from 'react';\r\nimport { Modal } from 'react-bootstrap';\r\nimport { GrClose } from 'react-icons/gr';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const ModalInfo = ({show, handleClose, participants = []}) => {\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            onHide={handleClose}\r\n            backdrop=\"static\"\r\n            keyboard={false}\r\n        >\r\n            <Modal.Header>\r\n                <Modal.Title>Información</Modal.Title>\r\n                <motion.button \r\n                    onClick={handleClose}\r\n                    className=\"btn\"\r\n                    whileTap={{scale: 1.4}}\r\n                >\r\n                    <GrClose />\r\n                </motion.button>\r\n            </Modal.Header>\r\n            <Modal.Body >\r\n                <h4 className=\"fw-bold text-center\">Participantes</h4>\r\n                {\r\n                participants.length === 0 \r\n                ? <div className=\"w-100\">\r\n                    <div className=\"alert alert-info text-center text-resp\">\r\n                    Todos los usuarios registrados en <strong>ChatRoom</strong>\r\n                    </div>\r\n                    <img src=\"./assets/chatting-group.svg\" alt=\"chatting-group\" className=\"svg\"/>\r\n                </div>\r\n                : <div className=\"w-100\">\r\n                    <div className=\"alert alert-success text-center\">\r\n                        <strong>{participants[0]} - {participants[1]}</strong>\r\n                    </div>\r\n                    <img src=\"./assets/chatting.svg\" alt=\"chatting\" className=\"svg\"/>\r\n                </div>\r\n                }\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nModalInfo.propTypes = {\r\n    show: PropTypes.bool.isRequired,\r\n    handleClose: PropTypes.func.isRequired,\r\n    participants: PropTypes.array\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { IoMdSend } from 'react-icons/io';\r\nimport styled from 'styled-components';\r\n\r\nconst WrapperInput = styled.div`\r\n    height: 60px;\r\n    width: 100%; \r\n    padding: 0 10%; \r\n    background: var(--input-chat);\r\n`;\r\n\r\nconst MessageInput = styled.input`\r\n    height: 65%;\r\n    border: 1px solid transparent;\r\n    outline: none;\r\n    border-bottom-left-radius: 5px;\r\n    border-top-left-radius: 5px;\r\n    padding-left: 10px;\r\n    background: rgb(27, 27, 27);\r\n    color: white;\r\n    transition: 0.3s ease;\r\n\r\n    &:focus {\r\n        border: 1px solid var(--bs-primary);\r\n    }\r\n`;\r\n\r\nconst MessageSubmit = styled.button`\r\n    border: none;\r\n    cursor: pointer;\r\n    height: 65%;\r\n    padding: 0 15px;\r\n    border-top-right-radius: 5px;\r\n    border-bottom-right-radius: 5px;\r\n    background-color: var(--bs-primary);\r\n    transition: 0.3s ease;\r\n\r\n    &:hover: {\r\n        background-color: #0f3d81;\r\n    }\r\n`;\r\n\r\nexport const ChatInput = ({handleSubmit, textRef}) => {\r\n    return (\r\n        <WrapperInput >\r\n            <form onSubmit={handleSubmit} className=\"h-100 d-flex align-items-center\">\r\n                <MessageInput ref={textRef} type=\"text\" className=\"w-100\" placeholder=\"Escribe un mensaje\" autoComplete=\"off\"/>\r\n                <MessageSubmit type=\"submit\" className=\"bg-primary\">\r\n                    <IoMdSend color=\"#fff\"/>\r\n                </MessageSubmit>\r\n            </form>\r\n        </WrapperInput>\r\n    )\r\n}\r\n\r\nChatInput.propTypes = {\r\n    handleSubmit: PropTypes.func.isRequired,\r\n    textRef: PropTypes.object.isRequired,\r\n}","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport const HeaderInfoChat = ({ location }) => {\r\n\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    \r\n    return (\r\n        <div className=\"d-flex align-items-center\">\r\n            {\r\n                location === 'public' &&\r\n                <>\r\n                    <img src=\"./assets/img1.jpg\" alt=\"Foto de perfil de grupo\" className=\"ms-3 img-topbar\"/>\r\n                    <span className=\"text-white fw-bold ms-3 text-resp\">Chat general</span>\r\n                </>\r\n            }\r\n            {\r\n                location === 'private' && \r\n                <>\r\n                    {selectedUser.picture !== 'null' \r\n                        ? <img src={selectedUser.picture} alt={selectedUser.name} className=\"ms-3  img-topbar\"/>\r\n                        : <img src=\"./assets/default-user.png\" alt=\"default\" className=\"ms-3 img-topbar\"/>\r\n                    }\r\n                    <span className=\"text-white fw-bold ms-3 text-resp\">\r\n                        {selectedUser.name} <i className=\"fas fa-circle mx-2 text-online\"></i>\r\n                    </span>\r\n                </>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React, { useCallback, useRef, useState } from 'react'\r\nimport { IoIosInformationCircle } from 'react-icons/io'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { MessageReceived } from '../dashboard/MessageReceived';\r\nimport { MessageSent } from '../dashboard/MessageSent';\r\nimport { motion } from 'framer-motion';\r\nimport { ModalInfo } from './ModalInfo';\r\nimport { AiOutlineMenu } from 'react-icons/ai';\r\nimport { openSidebar } from '../../actions/dashboard';\r\nimport { ChatInput } from './ChatInput';\r\nimport { HeaderInfoChat } from './HeaderInfoChat';\r\n\r\nexport const Chat = ({ sendMessage, showMenuButton }) => {\r\n\r\n    const [show, setShow] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const textRef = useRef();\r\n    const { messages } = useSelector(state => state.dashboard);\r\n    const { uid } = useSelector(state => state.auth);\r\n    \r\n    const setRef = useCallback( node => {\r\n        if( node ) {\r\n            node.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n    }, [])\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(textRef.current.value === ''){\r\n            textRef.current.value = '';\r\n        } else {\r\n            sendMessage(textRef.current.value);\r\n            textRef.current.value = '';\r\n        }\r\n    }\r\n\r\n    const handleOpen = () => setShow(true);\r\n    const handleClose = () => setShow(false);\r\n\r\n    return (\r\n        <>\r\n        <div className=\"chat w-100\">\r\n            <div className=\"bg-head-chat header-chat\">\r\n                \r\n                <HeaderInfoChat location=\"public\" />\r\n            \r\n                <div className=\"d-flex align-items-center justify-content-end\">\r\n                    <motion.button \r\n                        onClick={handleOpen}\r\n                        whileTap={ {scale: 2.5} }\r\n                        className=\"button-info mr-1rem\"\r\n                    >\r\n                        <IoIosInformationCircle />\r\n                    </motion.button>\r\n\r\n                    {showMenuButton && \r\n                    <motion.button\r\n                        onClick={() => dispatch( openSidebar() )}\r\n                        whileTap={ {scale: 2.5} }\r\n                        className=\"button-info mr-1rem\"\r\n                    >\r\n                        <AiOutlineMenu />\r\n                    </motion.button>\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className=\"overflow-auto pt-4 bg-chat container-chat\">\r\n                {(messages.length === 0) && \r\n                    <div className=\"alert alert-warning text-center mx-5 text-resp\">Todavía no hay mensajes, comienza escribiendo uno.</div>\r\n                }\r\n                {(messages.length > 0) &&\r\n                    messages.map((message, index) => {\r\n                        const lastMessage = messages.length - 1 === index;\r\n                        if(message.user._id === uid){\r\n                            return <div key={index} className=\"d-flex w-100 align-items-end flex-column\" ref={lastMessage ? setRef : null}>   \r\n                                <MessageSent \r\n                                    key={index} \r\n                                    text={message.message}\r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        } else {\r\n                            return <div key={index} className=\"d-flex w-100 align-items-start flex-column\" ref={lastMessage ? setRef : null}>\r\n                                <MessageReceived \r\n                                    key={index} \r\n                                    text={message.message} \r\n                                    name={message.user.name}\r\n                                    date={message.date}\r\n                                />\r\n                            </div>\r\n                        }\r\n                    })\r\n                }\r\n            </div>\r\n           \r\n            <ChatInput textRef={textRef} handleSubmit={handleSubmit} />\r\n        </div>\r\n        <ModalInfo handleClose={handleClose} show={show}/>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nChat.propType = {\r\n    sendMessage: PropTypes.func.isRequired,\r\n    showMenuButton: PropTypes.func.isRequired\r\n}","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\nimport axios from 'axios';\r\nimport { motion } from 'framer-motion';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { AiOutlineMenu } from 'react-icons/ai';\r\nimport { IoIosInformationCircle } from 'react-icons/io';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Swal from 'sweetalert2';\r\nimport { addChatMessages, openSidebar } from '../../actions/dashboard';\r\nimport { MessageReceived } from '../dashboard/MessageReceived';\r\nimport { MessageSent } from '../dashboard/MessageSent';\r\nimport { ModalInfo } from './ModalInfo';\r\nimport { ChatInput } from './ChatInput';\r\nimport { HeaderInfoChat } from './HeaderInfoChat';\r\n\r\nexport const PrivateChat = ({ sendPrivateMessage, showMenuButton }) => {\r\n\r\n    const textRef = useRef();\r\n    const [show, setShow] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const { chatMessages } = useSelector(state => state.dashboard);\r\n    const { uid, name } = useSelector(state => state.auth);\r\n    const dispatch = useDispatch();\r\n\r\n    const setRef = useCallback( node => {\r\n        if( node ) {\r\n            node.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n    }, [])\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(textRef.current.value === ''){\r\n            textRef.current.value = '';\r\n        } else {\r\n            sendPrivateMessage(textRef.current.value);\r\n            textRef.current.value = '';\r\n        }\r\n    }\r\n\r\n    const handleOpen = () => setShow(true);\r\n    const handleClose = () => setShow(false);\r\n\r\n    useEffect(() => {\r\n        //Solo si hay un usuario (chat) seleccionado\r\n        if(selectedUser?.uid) {\r\n            setLoading(true)\r\n            axios.get(`${process.env.REACT_APP_API_URL}/messages/get-all-chat/${uid}/${selectedUser?.uid}`, {\r\n                headers: {\r\n                    'x-token': localStorage.getItem('chat-token'),\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then( ( {data} ) => {\r\n                setLoading(false)\r\n                dispatch( addChatMessages(data.messagesChat) )\r\n            }) \r\n            .catch( err => {\r\n                Swal.fire('UPS, hubo un error cargando el chat');\r\n            })\r\n        }\r\n    }, [selectedUser?.uid, selectedUser?.name, uid, dispatch]); \r\n\r\n    return (\r\n        <>\r\n            <div className=\"chat w-100\">\r\n                <div className=\"bg-head-chat header-chat\">\r\n                    \r\n                    <HeaderInfoChat location=\"private\" />\r\n\r\n                    <div className=\"d-flex align-items-center justify-content-end\">\r\n                        <motion.button \r\n                            onClick={handleOpen}\r\n                            whileTap={ {scale: 2.5} }\r\n                            className=\"button-info mr-1rem\"\r\n                        >\r\n                            <IoIosInformationCircle />\r\n                        </motion.button>\r\n                        {showMenuButton && \r\n                        <motion.button\r\n                                onClick={() => dispatch( openSidebar() )}\r\n                                whileTap={ {scale: 2.5} }\r\n                                className=\"button-info mr-1rem\"\r\n                            >\r\n                            <AiOutlineMenu />\r\n                        </motion.button>\r\n                        }\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"overflow-auto pt-4 bg-chat container-chat\">\r\n                \r\n                {(loading) &&\r\n                    <div className=\"w-100 d-flex justify-content-center\">\r\n                        <Spinner animation=\"border\" role=\"status\" variant=\"primary\" />\r\n                    </div>\r\n                }\r\n                {(chatMessages && !loading && chatMessages.length === 0) &&\r\n                    <div className=\"alert alert-warning text-center text-resp mx-alert\">\r\n                        Aún no tienes mensajes con <strong>{selectedUser?.name}.</strong>\r\n                    </div>\r\n                }\r\n                {chatMessages &&\r\n                        chatMessages.map((message, index) => {\r\n                            const lastMessage = chatMessages.length - 1 === index;\r\n                            if(message.recipient !== uid){\r\n                                return <div key={index} className=\"d-flex w-100 align-items-end flex-column\" ref={lastMessage ? setRef : null}>\r\n                                    <MessageSent \r\n                                        key={index} \r\n                                        text={message.message}\r\n                                        date={message.date}\r\n                                    />\r\n                                </div>\r\n                            } else {\r\n                                return <div key={index} className=\"d-flex w-100 align-items-start flex-column\" ref={lastMessage ? setRef : null}>\r\n                                    <MessageReceived \r\n                                        key={index} \r\n                                        text={message.message} \r\n                                        date={message.date}\r\n                                    />\r\n                                </div>\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n            \r\n                <ChatInput textRef={textRef} handleSubmit={handleSubmit} />\r\n            </div>\r\n            <ModalInfo \r\n                handleClose={handleClose} \r\n                show={show}\r\n                participants={[name, selectedUser?.name]}\r\n            />\r\n        </>\r\n    )\r\n}\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport moment from 'moment'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { io } from 'socket.io-client';\r\nimport { addChatMessages, addMessages, addUsers, addAllUsers } from '../actions/dashboard';\r\nimport { setStats } from '../actions/stats';\r\n\r\nconst SocketContext = React.createContext();\r\n\r\nexport function useSocket() {\r\n    return useContext(SocketContext)\r\n}\r\n\r\nexport const SocketProvider = ( {children} ) => {\r\n\r\n    const [socket, setSocket] = useState();\r\n    const { uid, name, picture } = useSelector(state => state.auth);\r\n    const { selectedUser } = useSelector(state => state.dashboard);\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const sendMessage = useCallback(( message ) => {\r\n       const now = new Date();\r\n       const date = moment(now).format('LT');\r\n\r\n        socket.emit('send-message',{message, user: uid, date})\r\n    }, [socket, uid]);\r\n\r\n    const sendPrivateMessage = useCallback(( message ) => {\r\n        const now = new Date();\r\n        const date = moment(now).format('LT');\r\n\r\n        socket.emit('send-private-message', [{message, date}, {uid: selectedUser.uid, name: selectedUser.name}]);\r\n    }, [selectedUser?.uid, selectedUser?.name, socket]);\r\n\r\n    useEffect(() => {\r\n        \r\n            const newSocket = io(process.env.REACT_APP_URL, {\r\n            query: { uid, name, picture }\r\n            })\r\n            setSocket(newSocket)     \r\n\r\n        return () => newSocket.close();\r\n    }, [uid, name, picture]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n        socket.on('receive-messages', (payload) => {\r\n            dispatch( addMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('receive-messages')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('created-message', (payload) => {\r\n            dispatch( addMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('created-message')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('active-users', (payload) => {\r\n            dispatch( addUsers(payload) );\r\n        })\r\n\r\n        return () => socket.off('active-users')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if(!socket) return;\r\n\r\n        socket.on('private-messages', (payload) => {\r\n            dispatch( addChatMessages(payload) )\r\n        })\r\n\r\n        return () => socket.off('private-messages')\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n       if(!socket) return;\r\n\r\n       socket.on('registered-users', (payload) => {\r\n            dispatch( addAllUsers(payload) )\r\n       })\r\n       return () => socket.off('registered-users')\r\n    }, [socket, dispatch])\r\n\r\n  \r\n      useEffect(() => {\r\n        if(!socket) return;\r\n  \r\n        socket.on('get-stats', (payload) => {\r\n            dispatch( setStats(payload) )\r\n        })\r\n  \r\n        return () => socket.off('get-stats')\r\n    }, [socket, dispatch]); \r\n\r\n\r\n    const values = {\r\n        sendMessage,\r\n        sendPrivateMessage\r\n    }\r\n\r\n    return (\r\n        <SocketContext.Provider value={values}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Aside } from './Aside';\r\nimport { AsideResponsive } from './AsideResponsive';\r\nimport { Chat } from './Chat';\r\nimport { selectUser } from '../../actions/dashboard';\r\nimport { PrivateChat } from './PrivateChat';\r\nimport { useSocket } from '../../context/SocketProvider';\r\nimport { Helmet } from 'react-helmet';\r\n\r\n\r\nexport const DashboardScreen = () => {\r\n\r\n    const { name } = useSelector(state => state.auth);\r\n    const [width, setWidth] = useState(window.screen.width);\r\n    const { selectedUser, showSidebar } = useSelector(state => state.dashboard);\r\n    const {sendMessage, sendPrivateMessage} = useSocket();\r\n\r\n    useEffect(() => {\r\n\r\n        const windowResize = (e) => {\r\n            setWidth(e.target.innerWidth)\r\n        }\r\n        \r\n        window.addEventListener('resize', windowResize )\r\n\r\n        return () => window.removeEventListener('resize', windowResize)\r\n\r\n    }, [])\r\n    \r\n    return (  \r\n        <>\r\n            <Helmet>\r\n                <title>{ name } | ChatRoom</title>\r\n                <meta name=\"description\" content=\"Contenido principal del usuario y salas de chat\" />\r\n            </Helmet>\r\n            \r\n            <main>\r\n                <div id=\"container-grid\">\r\n\r\n                    {width > 900 &&\r\n                    <div className=\"p-0 aside-color\">\r\n                        <Aside /> \r\n                    </div>\r\n                    }\r\n\r\n                    {width <= 900 &&\r\n                    <div className={`p-0 aside-color aside-responsive ${showSidebar && 'aside-responsive-show'}`}>\r\n                        <AsideResponsive />\r\n                    </div>\r\n                    }\r\n\r\n\r\n                    <div className=\"p-0 d-flex\">\r\n                        <div className=\"d-flex column-chat-dimensions\" id=\"chat\">\r\n                            {selectedUser?.uid && selectUser?.name \r\n                            ? <PrivateChat \r\n                                sendPrivateMessage={sendPrivateMessage} \r\n                                showMenuButton={ width < 900 ? true : false } \r\n                            />\r\n                            : <Chat \r\n                                sendMessage={sendMessage} \r\n                                showMenuButton={ width < 900 ? true : false }\r\n                            />\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </>\r\n        \r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Col, Container, Row } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux';\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport {Helmet} from \"react-helmet\";\r\nimport { LinkButton } from '../dashboard/LinkButton';\r\n\r\nexport const StatisticsScreen = () => {\r\n\r\n    const {countMessages} = useSelector(state => state.stats)\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Stats | ChatRoom</title>\r\n                <meta name=\"description\" content=\"Estadisticas del chat general\" />\r\n            </Helmet>\r\n\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col md={12} className=\"p-0 bg-dark\">\r\n                        <div className=\"container-full\">\r\n                            <div className=\"px-3 py-2 bg-head-chat header-stats\">\r\n                                <LinkButton to=\"/\" text=\"Inicio\"/>\r\n                            </div>\r\n                            <h3 className=\"text-resp text-white text-center mt-5\">Usuarios que más mensajes han enviado</h3>\r\n                            <h4 className=\"text-resp text-info text-center mb-5\">En el chat general</h4>\r\n                            <ResponsiveContainer width=\"90%\" height=\"50%\" className=\"text-resp\">\r\n                                <BarChart\r\n                                    width={500}\r\n                                    height={300}\r\n                                    data={countMessages}\r\n                                    margin={{\r\n                                        top: 5,\r\n                                        right: 5,\r\n                                        left: 5,\r\n                                        bottom: 5,\r\n                                    }}\r\n                                >\r\n                                    <XAxis dataKey=\"name\" />\r\n                                    <YAxis />\r\n                                    <Tooltip />\r\n                                    <Legend />\r\n                                    <Bar dataKey=\"messages\" fill=\"#8884d8\" />\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport { FcGoogle } from 'react-icons/fc';\r\nimport { useDispatch } from 'react-redux';\r\nimport { login } from '../../actions/auth';\r\nimport styled from 'styled-components';\r\n\r\nconst Div = styled.div`\r\n    width: 100%;\r\n    height: 42px;\r\n    margin-top: 1rem;\r\n    background-color: #4285F4;\r\n    border-radius: 5px;\r\n    color: white;\r\n    cursor: pointer;\r\n    display: grid;\r\n    grid-template-columns: 20% 80%;\r\n    transition: 0.2s ease;\r\n\r\n    &:hover {\r\n        background: #366fca;\r\n    }\r\n`;\r\nconst Logo = styled.div`\r\n    background: #fff;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-top-left-radius: 5px;\r\n    border-bottom-left-radius: 5px;\r\n`;\r\nconst Text = styled.div`\r\n    font-family: 'Roboto', sans-serif;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nexport const GoogleButton = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const clientId = '257430794857-ifhr62u2i59t0snq8a3q4gns6k8or9a6.apps.googleusercontent.com';\r\n\r\n    const url = ( window.location.hostname.includes('localhost') )\r\n                ? 'http://localhost:5000/api/auth/google'\r\n                : 'https://room-chat-dan.herokuapp.com/api/auth/google'\r\n\r\n    const doFetch = async (id_token) => {\r\n        const data = { id_token }\r\n        fetch( url, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(data)\r\n        })\r\n        .then( res => res.json() )\r\n        .then( ({uid, name, email, google, picture, token}) => {\r\n            dispatch( login({uid, name, email, google, picture}) );\r\n            localStorage.setItem('chat-token', token)\r\n        })\r\n        .catch( console.log )\r\n    }\r\n\r\n    const onSuccess = async (res) => {\r\n        const {tokenId} = res;\r\n        await doFetch(tokenId);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <GoogleLogin\r\n                clientId={clientId}\r\n                onSuccess={onSuccess}\r\n                cookiePolicy={'single_host_origin'}\r\n                className=\"mt-3 w-100 text-center\"\r\n                render={renderProps => (\r\n                    // <motion.div \r\n                    //     whileTap={{ scale: 1.1 }}\r\n                    //     onClick={renderProps.onClick} \r\n                    //     disabled={renderProps.disabled}\r\n                    //     className=\"google-btn\"\r\n                    // >\r\n                    //     <div className=\"logo\">\r\n                    //         <FcGoogle size=\"1.7rem\"/>\r\n                    //     </div>\r\n                    //     <div className=\"l-text\">Ingresar con Google</div>\r\n                    // </motion.div>\r\n                    <Div \r\n                        onClick={renderProps.onClick} \r\n                        disabled={renderProps.disabled}\r\n                    >\r\n                        <Logo>\r\n                             <FcGoogle size=\"1.7rem\"/>\r\n                         </Logo>\r\n                         <Text>Ingresar con Google</Text>\r\n                    </Div>\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components';\r\nimport { FaUserAstronaut } from 'react-icons/fa';\r\n\r\nconst Link = styled.a`\r\n    text-decoration: none;\r\n    color: rgb(108, 117, 125);\r\n`;\r\n\r\nexport const LogoForm = ({text}) => {\r\n    return (\r\n        <>\r\n            <h2 className=\"text-white text-start texto mb-0 animate__animated animate__rubberBand\">ChatRoom</h2>\r\n            <p className=\"text-muted text-end\">por <Link href=\"https://github.com/danield413\" target=\"_blank\"><strong>Daniel Díaz <FaUserAstronaut /></strong></Link></p> \r\n            <h4 className=\"text-white lead\">{text}</h4>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, Container, Form } from 'react-bootstrap';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {Helmet} from \"react-helmet\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { startLogin } from '../../actions/auth';\r\nimport { GoogleButton } from './GoogleButton';\r\nimport { LogoForm } from './LogoForm';\r\n\r\nexport const LoginScreen = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n     //Validación del formulario\r\n     const formik = useFormik({\r\n        initialValues: {\r\n            email: '',\r\n            password: ''\r\n        },\r\n        validationSchema: Yup.object({\r\n            email: Yup.string()\r\n                    .email( true )\r\n                    .required( true ),\r\n            password: Yup.string()\r\n                    .required( true )\r\n                    .min(8, true)\r\n        }),\r\n        onSubmit : (values) => {\r\n\r\n            const { email, password } = values;\r\n           \r\n            dispatch( startLogin(email, password) );\r\n        }   \r\n    });\r\n\r\n    \r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>Chat | Login</title>\r\n                <meta name=\"description\" content=\"Inicio de sesión\" />\r\n            </Helmet>\r\n\r\n            <Container fluid className=\"bg-dark d-flex justify-content-center align-items-center container-full\">\r\n                <div className=\"form\">\r\n                    <Form onSubmit={formik.handleSubmit} className=\"animate__animated animate__fadeIn\">\r\n                        <LogoForm text=\"Inicio de sesión\"/>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                autoComplete=\"off\"\r\n                                name=\"email\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"email\" \r\n                                placeholder=\"Correo\" \r\n                                value={ formik.values.email }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={ formik.errors.email }\r\n                            />\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Control \r\n                                name=\"password\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"password\" \r\n                                placeholder=\"Contraseña\" \r\n                                value={ formik.values.password }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={ formik.errors.password }\r\n                            />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\" variant=\"outline-primary\" className=\"w-100 mt-3\">\r\n                            Ingresar\r\n                        </Button>\r\n                        <GoogleButton />\r\n                        <Link to=\"/auth/register\" className=\"d-inline-block mt-3\">Si no tienes una cuenta</Link>\r\n                    </Form>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, Container, Form } from 'react-bootstrap';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { startRegister } from '../../actions/auth';\r\nimport { LogoForm } from './LogoForm';\r\n\r\nexport const RegisterScreen = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n     //Validación del formulario\r\n     const formik = useFormik({\r\n        initialValues: {\r\n            name: '',\r\n            email: '',\r\n            password: ''\r\n        },\r\n        validationSchema: Yup.object({\r\n            name: Yup.string()\r\n                    .required( true )\r\n                    .min(3, true),\r\n            email: Yup.string()\r\n                    .email( true )\r\n                    .required( true ),\r\n            password: Yup.string()\r\n                    .required( true )\r\n                    .min(8, true)\r\n        }),\r\n        onSubmit : (values) => {\r\n\r\n            const { name, email, password } = values;\r\n           \r\n            dispatch( startRegister(name, email, password) );\r\n        }   \r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>Chat | Register</title>\r\n                <meta name=\"description\" content=\"Registro de nuevo usuario\" />\r\n            </Helmet>\r\n\r\n            <Container fluid className=\"bg-dark d-flex flex-column justify-content-center align-items-center container-full\">\r\n                \r\n                <div className=\"form\">\r\n                    <Form onSubmit={formik.handleSubmit} className=\"animate__animated animate__fadeIn\">\r\n                        <LogoForm text=\"Registro\"/>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                autoComplete=\"off\"\r\n                                name=\"name\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"text\" \r\n                                placeholder=\"Nombre\" \r\n                                value={ formik.values.name }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={formik.errors.name}\r\n                            />\r\n                        </Form.Group>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Control \r\n                                autoComplete=\"off\"\r\n                                name=\"email\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"email\" \r\n                                placeholder=\"Correo\"  \r\n                                value={ formik.values.email }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={formik.errors.email}\r\n                            />\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Control \r\n                                name=\"password\"\r\n                                className=\"bg-dark text-white\" \r\n                                type=\"password\" \r\n                                placeholder=\"Contraseña\" \r\n                                value={ formik.values.password }\r\n                                onChange={ formik.handleChange }\r\n                                onBlur={ formik.handleBlur }\r\n                                isInvalid={formik.errors.password}\r\n                            />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\" variant=\"outline-primary\" className=\"w-100 mt-3\">\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link to=\"/auth/login\" className=\"d-inline-block mt-3\">Si ya tienes una cuenta</Link>\r\n                    </Form>\r\n                </div>\r\n            </Container>\r\n        </>\r\n        \r\n    )\r\n}\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Switch, Route, Redirect,} from \"react-router-dom\";\r\nimport { LoginScreen } from '../components/auth/LoginScreen';\r\nimport { RegisterScreen } from '../components/auth/RegisterScreen';\r\n\r\n\r\nexport const AuthRouter = () => {\r\n    return (\r\n        <Router>\r\n            <Switch>\r\n\r\n                <Route \r\n                    path=\"/auth/login\"\r\n                    component={LoginScreen}\r\n                />\r\n\r\n                <Route \r\n                    path=\"/auth/register\"\r\n                    component={RegisterScreen}\r\n                />\r\n\r\n                <Redirect to=\"/auth/login\" />\r\n\r\n            </Switch>\r\n        </Router>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component : Component,\r\n    ...rest\r\n}) => {\r\n\r\n    return (\r\n        <Route {...rest}\r\n            component={ (props) => (\r\n                ( isAuthenticated )\r\n                    ? ( <Component { ...props } /> )\r\n                    : ( <Redirect to=\"/login\" /> )\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component : Component,\r\n    ...rest\r\n}) => {\r\n\r\n\r\n\r\n    return (\r\n        <Route {...rest}\r\n            component={ (props) => (\r\n                ( isAuthenticated )\r\n                    ? ( <Redirect to=\"/\" /> )\r\n                    : ( <Component { ...props } /> )\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { BrowserRouter as Router, Switch, Redirect } from \"react-router-dom\";\r\nimport { startChecking } from '../actions/auth';\r\n\r\nimport { DashboardScreen } from '../components/dashboard/DashboardScreen';\r\nimport { StatisticsScreen } from '../components/statistics/StatisticsScreen';\r\nimport { SocketProvider } from '../context/SocketProvider';\r\nimport { AuthRouter } from './AuthRouter';\r\nimport { PrivateRoute } from './PrivateRoute';\r\nimport { PublicRoute } from './PublicRoute';\r\n\r\n\r\nexport const AppRouter = () => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { checking, uid } = useSelector(state => state.auth);\r\n\r\n    //se verifica el token cada vez que se renderiza de nuevo el AppRouter\r\n    useEffect(() => {\r\n        \r\n        dispatch( startChecking() );\r\n\r\n    }, [dispatch]);\r\n\r\n    if( checking ) {\r\n        return(\r\n            <div className=\"flexible\">\r\n                <div className=\"sk-chase\">\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                    <div className=\"sk-chase-dot\"></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <SocketProvider>\r\n             <Router>\r\n                <Switch>\r\n\r\n                    <PublicRoute \r\n                        isAuthenticated={!!uid}\r\n                        path=\"/auth\"\r\n                        component={ AuthRouter }\r\n                    />\r\n\r\n                    <PrivateRoute \r\n                        isAuthenticated={!!uid}\r\n                        exact\r\n                        path=\"/\" \r\n                        component={ DashboardScreen }\r\n                    />\r\n\r\n                    <PrivateRoute\r\n                        isAuthenticated={!!uid}\r\n                        path=\"/stats\"\r\n                        component={ StatisticsScreen }\r\n                    />\r\n\r\n                    <Redirect to=\"/auth/login\" />\r\n\r\n                </Switch>\r\n            </Router>\r\n        </SocketProvider>\r\n    )\r\n}\r\n","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    checking: true,\r\n}\r\n\r\nexport const authReducer = (state= initialState, action) => {\r\n    switch (action.type) {\r\n        case types.authLogin:\r\n            return {\r\n                ...state,\r\n                checking: false,\r\n                ...action.payload\r\n            }    \r\n\r\n        case types.authLogout:\r\n            return {\r\n                checking: false\r\n            }\r\n            \r\n        case types.authCheckingJWTFinish:\r\n            return {\r\n                ...state,\r\n                checking: false\r\n            }\r\n        case types.newUser: \r\n            return {\r\n                ...state,\r\n                newUser: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    messages: [],\r\n    users: [],\r\n    selectedUser: {},\r\n    chatMessages: [],\r\n    allUsers: [],\r\n}\r\n\r\nexport const dashboardReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case types.addMessages:\r\n            return {\r\n                ...state,\r\n                messages: action?.payload ? action.payload : []\r\n            }\r\n        case types.addUsers:\r\n            return {\r\n                ...state,\r\n                users: action.payload\r\n            }\r\n        case types.cleanDashboard: \r\n            return {\r\n                messages: [],\r\n                users: []\r\n            }\r\n        case types.selectUser: \r\n            return {\r\n                ...state,\r\n                selectedUser: action.payload\r\n            }\r\n        case types.addChatMessages: \r\n            return {\r\n                ...state,\r\n                chatMessages: action.payload\r\n            }\r\n        case types.addAllUsers: \r\n            return {\r\n                ...state,\r\n                allUsers: action.payload\r\n            }\r\n        case types.openSidebar: \r\n            return {\r\n                ...state,\r\n                showSidebar: true\r\n            }\r\n        case types.closeSidebar: \r\n            return {\r\n                ...state,\r\n                showSidebar: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","import { types } from \"../types/types\";\r\n\r\nconst initialState = {\r\n    countMessages: []\r\n}\r\n\r\nexport const statsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case types.loadStats:\r\n            return {\r\n                ...state,\r\n                countMessages: action.payload\r\n            }\r\n        case types.cleanStats:\r\n            return {\r\n                countMessages: []\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { authReducer } from '../reducers/authReducer';\r\nimport { dashboardReducer } from '../reducers/dashboardReducer';\r\nimport { statsReducer } from '../reducers/statsReducer';\r\n\r\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\n\r\nconst reducers = combineReducers({\r\n    auth: authReducer,\r\n    dashboard: dashboardReducer,\r\n    stats: statsReducer\r\n})\r\n\r\nexport const store = createStore(\r\n    reducers,\r\n    composeEnhancers( applyMiddleware(thunk) )\r\n)","import { AppRouter } from './router/AppRouter';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport './css/app.css';\r\nimport 'animate.css';\r\n\r\nfunction App() {\r\n\r\n  return(\r\n    <Provider store={ store }>\r\n      <AppRouter />    \r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/js/dist/dropdown';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}