(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{668:function(e,t,a){},681:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(57),r=a.n(c),i=a(16),o=a(43),l=a(34),d=a(47),u=a.n(d),j=a(113),b=a(135),m=a.n(b),h=a(98),x=a.n(h),O="AUTH checking JWT finish",f="AUTH login",p="AUTH logout",g="AUTH new user",v="DASHBOARD add messages",w="DASHBOARD add chat messages",N="DASHBOARD add users",k="DASHBOARD clean",y="DASHBOARD select user",C="DASHBOARD add all registered users",S="DASHBOARD open sidebar",I="DASHBOARD close sidebar",_="STATS load stats",T="STATS clean stats",A=function(e){return{type:f,payload:e}},D=function(){return{type:g}},E=function(){return{type:O}},B=function(){return{type:p}},M=a(23),R=a(689),U=a(362),H=a(690),z=a(94),q=function(e){return{type:v,payload:e}},F=function(e){return{type:w,payload:e}},P=function(e){return{type:y,payload:e}},G=function(){return{type:S}},L=function(){return{type:I}},V=function(){return{type:k}},J=a(2),K=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).uid,a=Object(i.c)((function(e){return e.dashboard})).selectedUser,n=Object(i.c)((function(e){return e.dashboard})).users;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h6",{className:"lead ms-4 my-3 ",children:Object(J.jsx)("strong",{className:"text-light text-resp",children:"Conectados"})}),Object(J.jsxs)("button",{onClick:function(){e(P({})),e(L())},className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat((null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.uid)?"":"user-sidebar-active"),children:[Object(J.jsx)("img",{src:"./assets/img1.jpg",alt:"default",className:"ms-3 mr-10 img-topbar"}),Object(J.jsxs)("span",{className:"fw-bold text-resp",children:["Chat general ",Object(J.jsx)("i",{className:"fas fa-circle mx-2 fz-12px text-online"})]})]}),Object(J.jsx)("div",{className:"w-100 overflow-auto online-height",children:n&&n.map((function(n){return(null===n||void 0===n?void 0:n.id)!==t&&Object(J.jsxs)("button",{onClick:function(){e(P({uid:null===n||void 0===n?void 0:n.id,name:null===n||void 0===n?void 0:n.name,picture:null===n||void 0===n?void 0:n.picture})),e(L())},className:"text-resp text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat(n.id===(null===a||void 0===a?void 0:a.uid)?"user-sidebar-active":""),children:["undefined"!==n.picture&&"null"!==n.picture?Object(J.jsx)("img",{src:n.picture,alt:n.name,className:"ms-3 mr-10 img-topbar"}):Object(J.jsx)("img",{src:"./assets/default-user.png",alt:"default",className:"ms-3 mr-10 img-topbar"}),Object(J.jsxs)("span",{className:"fw-bold text-resp",children:[n.name," ",Object(J.jsx)("i",{className:"fas fa-circle mx-2 text-online"})]})]},n.id)}))})]})},W=function(){var e=Object(i.c)((function(e){return e.dashboard})).allUsers,t=Object(i.c)((function(e){return e.auth})).uid;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h5",{className:"lead ms-4 my-3",children:Object(J.jsx)("strong",{className:"text-light text-resp",children:"Todos"})}),Object(J.jsx)("div",{className:"w-100 overflow-auto all-height",children:e&&e.map((function(e){return(null===e||void 0===e?void 0:e.id)!==t&&Object(J.jsxs)("button",{className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar",children:[e.picture?Object(J.jsx)("img",{src:null===e||void 0===e?void 0:e.picture,alt:null===e||void 0===e?void 0:e.name,className:"ms-3 mr-10 img-topbar"}):Object(J.jsx)("img",{src:"./assets/default-user.png",alt:"default",className:"ms-3 mr-10 img-topbar"}),Object(J.jsx)("span",{className:"fw-bold",children:e.name})]},e.uid)}))})]})},X=a(72),Q=function(){return{type:T}},Y=function(e){if(e)return e.split(" ")[0]},Z=function(){var e=Object(n.useState)("online"),t=Object(M.a)(e,2),a=t[0],s=t[1],c=Object(i.b)(),r=Object(i.c)((function(e){return e.auth})),l=r.uid,d=r.name,u=r.picture,j=Object(i.c)((function(e){return e.dashboard})).users,b=Object(i.c)((function(e){return e.dashboard})).selectedUser,m=Object(n.useCallback)((function(){j.find((function(e){return e.id===(null===b||void 0===b?void 0:b.uid)}))||c(P({}))}),[j,null===b||void 0===b?void 0:b.uid,c]);Object(n.useEffect)((function(){m()}),[j,m]);return Object(J.jsxs)("aside",{className:"h-100",children:[Object(J.jsx)("header",{children:Object(J.jsxs)("div",{className:"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height",children:[Object(J.jsxs)("div",{children:[u?Object(J.jsx)("img",{src:u,alt:d,className:"ms-3 mr-10 img-topbar"}):Object(J.jsx)("img",{src:"./assets/default-user.png",alt:"default",className:"ms-3 mr-10 img-topbar"}),Object(J.jsxs)("span",{className:"fw-bold text-white",children:[Y(d),Object(J.jsx)("i",{className:"fas fa-circle mx-2 text-online"})]})]}),Object(J.jsxs)(R.a,{title:Object(J.jsx)(z.b,{}),id:"dropdown-item-button",variant:"dark",className:"bg-dark d-inline",children:[Object(J.jsx)(U.a.ItemText,{className:"bg-secondary text-light",children:Object(J.jsx)("strong",{children:"Opciones"})}),Object(J.jsx)(U.a.Item,{as:"button",onClick:function(){c(B()),c(V()),c(Q()),localStorage.removeItem("chat-token")},className:"bg-secondary text-light",children:"Salir"})]})]})}),Object(J.jsxs)("p",{className:"text-muted text-center mt-2",children:["ID: ",l]}),Object(J.jsx)("div",{className:"w-100 d-flex justify-content-center mb-3",children:Object(J.jsxs)(o.b,{className:"text-resp link-button px-3 fw-bold",to:"/stats",onClick:function(){return c(L())},children:[Object(J.jsx)(X.b,{}),"Estad\xedsticas"]})}),Object(J.jsxs)("div",{children:[Object(J.jsxs)(H.a,{"aria-label":"selecci\xf3n",className:"w-100",children:[Object(J.jsx)("button",{onClick:function(){return s("online")},className:"button-group w-50 text-resp ".concat("online"===a&&"button-group-active"," fw-bold text-white"),children:"Conectados"}),Object(J.jsx)("button",{onClick:function(){return s("all")},className:"button-group w-50 text-resp ".concat("all"===a&&"button-group-active"," fw-bold text-white"),children:"Todos"})]}),"online"===a?Object(J.jsx)(K,{}):Object(J.jsx)(W,{})]})]})},$=a(330),ee=a(699),te=function(){var e=Object(n.useState)("online"),t=Object(M.a)(e,2),a=t[0],s=t[1],c=Object(i.b)(),r=Object(i.c)((function(e){return e.auth})),l=r.uid,d=r.name,u=r.picture,j=Object(i.c)((function(e){return e.dashboard})).users,b=Object(i.c)((function(e){return e.dashboard})).selectedUser,m=Object(n.useCallback)((function(){j.find((function(e){return e.id===(null===b||void 0===b?void 0:b.uid)}))||c(P({}))}),[j,null===b||void 0===b?void 0:b.uid,c]);Object(n.useEffect)((function(){m()}),[j,m]);return Object(J.jsxs)("aside",{className:"h-100",children:[Object(J.jsx)("header",{children:Object(J.jsxs)("div",{className:"w-100 bg-dark d-flex justify-content-between align-items-center px-2 header-height",children:[Object(J.jsxs)("div",{children:[u?Object(J.jsx)("img",{src:u,alt:d,className:"ms-3 mr-10 img-topbar"}):Object(J.jsx)("img",{src:"./assets/default-user.png",alt:"default",className:"ms-3 mr-10 img-topbar"}),Object(J.jsxs)("span",{className:"fw-bold text-white text-resp",children:[Y(d),Object(J.jsx)("i",{className:"fas fa-circle mx-2 text-online"})]})]}),Object(J.jsxs)("div",{children:[Object(J.jsxs)(R.a,{title:Object(J.jsx)(z.b,{}),id:"dropdown-item-button",variant:"dark",className:"bg-dark d-inline",children:[Object(J.jsx)(U.a.ItemText,{className:"bg-secondary text-light text-resp",children:Object(J.jsx)("strong",{children:"Opciones"})}),Object(J.jsx)(U.a.Item,{as:"button",onClick:function(){c(B()),c(V()),c(Q()),localStorage.removeItem("chat-token")},className:"bg-secondary text-light text-resp",children:"Salir"})]}),Object(J.jsx)(ee.a.button,{onClick:function(){return c(L())},whileTap:{scale:1.4},className:"sidebar-close",children:Object(J.jsx)($.a,{fill:"#fff",size:"1.4rem"})})]})]})}),Object(J.jsxs)("p",{className:"text-muted text-center mt-2",children:["ID: ",l]}),Object(J.jsx)("div",{className:"w-100 d-flex justify-content-center mb-3",children:Object(J.jsxs)(o.b,{className:"text-resp link-button px-3 fw-bold",to:"/stats",onClick:function(){return c(L())},children:[Object(J.jsx)(X.b,{}),"Estad\xedsticas"]})}),Object(J.jsxs)("div",{children:[Object(J.jsxs)(H.a,{"aria-label":"selecci\xf3n",className:"w-100",children:[Object(J.jsx)("button",{onClick:function(){return s("online")},className:"text-resp button-group w-50 ".concat("online"===a&&"button-group-active"," fw-bold text-white"),children:"Conectados"}),Object(J.jsx)("button",{onClick:function(){return s("all")},className:"text-resp button-group w-50 ".concat("all"===a&&"button-group-active"," fw-bold text-white"),children:"Todos"})]}),"online"===a?Object(J.jsx)(K,{}):Object(J.jsx)(W,{})]})]})},ae=a(5),ne=a.n(ae),se=function(e){var t=e.text,a=e.name,n=e.date;return Object(J.jsxs)(ee.a.div,{animate:{scale:[1,1.1,1]},className:"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-received",children:[a&&Object(J.jsxs)("div",{className:"text-msg-res fw-bold d-flex justify-content-between align-items-center",children:[a,Object(J.jsx)(R.a,{title:"",size:"sm",id:"dropdown-item-button",children:Object(J.jsx)(U.a.Item,{as:"button",onClick:function(){navigator.clipboard.writeText(t).then((function(){x.a.fire("Mensaje copiado")}))},className:"bg-secondary text-light text-msg-res",children:"Copiar texto"})})]}),t,Object(J.jsx)("span",{className:"text-date d-block text-muted align-self-end",children:n})]})},ce=function(e){var t=e.text,a=e.date;return Object(J.jsxs)(ee.a.div,{animate:{scale:[1,1.1,1]},className:"text-msg-res px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn message-sent",children:[t,Object(J.jsx)("span",{className:"text-date d-block text-light align-self-end fz-12px",children:a})]})},re=a(700),ie=a(331),oe=function(e){var t=e.show,a=e.handleClose,n=e.participants;return Object(J.jsxs)(re.a,{show:t,onHide:a,backdrop:"static",keyboard:!1,children:[Object(J.jsxs)(re.a.Header,{children:[Object(J.jsx)(re.a.Title,{children:"Informaci\xf3n"}),Object(J.jsx)(ee.a.button,{onClick:a,className:"btn",whileTap:{scale:1.4},children:Object(J.jsx)(ie.a,{})})]}),Object(J.jsxs)(re.a.Body,{children:[Object(J.jsx)("h4",{className:"fw-bold text-center",children:"Participantes"}),n?Object(J.jsxs)("div",{className:"w-100",children:[Object(J.jsx)("div",{className:"alert alert-success text-center",children:Object(J.jsxs)("strong",{children:[n[0]," - ",n[1]]})}),Object(J.jsx)("img",{src:"./assets/chatting.svg",alt:"chatting",className:"svg"})]}):Object(J.jsxs)("div",{className:"w-100",children:[Object(J.jsxs)("div",{className:"alert alert-info text-center text-resp",children:["Todos los usuarios registrados en ",Object(J.jsx)("strong",{children:"ChatRoom"})]}),Object(J.jsx)("img",{src:"./assets/chatting-group.svg",alt:"chatting-group",className:"svg"})]})]}),Object(J.jsx)(re.a.Footer,{})]})},le=function(e){var t=e.sendMessage,a=e.showMenuButton,s=Object(n.useState)(!1),c=Object(M.a)(s,2),r=c[0],o=c[1],l=Object(i.b)(),d=Object(n.useRef)(),u=Object(i.c)((function(e){return e.dashboard})).messages,j=Object(i.c)((function(e){return e.auth})).uid,b=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"chat w-100",children:[Object(J.jsxs)("div",{className:"bg-head-chat header-chat",children:[Object(J.jsxs)("div",{className:"d-flex align-items-center",children:[Object(J.jsx)("img",{src:"./assets/img1.jpg",alt:"Foto de perfil de grupo",className:"ms-3 img-topbar"}),Object(J.jsx)("span",{className:"text-white fw-bold ms-3 text-resp",children:"Chat general"})]}),Object(J.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(J.jsx)(ee.a.button,{onClick:function(){return o(!0)},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(J.jsx)(X.a,{})}),a&&Object(J.jsx)(ee.a.button,{onClick:function(){return l(G())},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(J.jsx)(z.a,{})})]})]}),Object(J.jsxs)("div",{className:"overflow-auto pt-4 bg-chat container-chat",children:[0===u.length&&Object(J.jsx)("div",{className:"alert alert-warning text-center mx-5 text-resp",children:"Todav\xeda no hay mensajes, comienza escribiendo uno."}),u.length>0&&u.map((function(e,t){var a=u.length-1===t;return e.user._id===j?Object(J.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?b:null,children:Object(J.jsx)(ce,{text:e.message,date:e.date},t)},t):Object(J.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?b:null,children:Object(J.jsx)(se,{text:e.message,name:e.user.name,date:e.date},t)},t)}))]}),Object(J.jsx)("div",{id:"chat-input",children:Object(J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===d.current.value||t(d.current.value),d.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(J.jsx)("input",{ref:d,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(J.jsx)("button",{type:"submit",id:"message-submit",className:"d-flex align-items-center",children:Object(J.jsx)(X.c,{color:"#fff",size:"18px"})})]})})]}),Object(J.jsx)(oe,{handleClose:function(){return o(!1)},show:r})]})};le.propType={sendMessage:ne.a.func.isRequired};var de=a(691),ue=function(e){var t=e.sendPrivateMessage,a=e.showMenuButton,s=Object(n.useRef)(),c=Object(n.useState)(!1),r=Object(M.a)(c,2),o=r[0],l=r[1],d=Object(n.useState)(!1),u=Object(M.a)(d,2),j=u[0],b=u[1],h=Object(i.c)((function(e){return e.dashboard})).selectedUser,O=Object(i.c)((function(e){return e.dashboard})).chatMessages,f=Object(i.c)((function(e){return e.auth})),p=f.uid,g=f.name,v=Object(i.b)(),w=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(n.useEffect)((function(){(null===h||void 0===h?void 0:h.uid)&&(b(!0),m.a.get("".concat("https://room-chat-dan.herokuapp.com/api","/messages/get-all-chat/").concat(p,"/").concat(null===h||void 0===h?void 0:h.uid),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}}).then((function(e){var t=e.data;b(!1),v(F(t.messagesChat))})).catch((function(e){x.a.fire("UPS, hubo un error cargando el chat")})))}),[null===h||void 0===h?void 0:h.uid,null===h||void 0===h?void 0:h.name,p,v]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"chat w-100",children:[Object(J.jsxs)("div",{className:"bg-head-chat header-chat",children:[Object(J.jsxs)("div",{className:"d-flex align-items-center",children:["null"!==h.picture?Object(J.jsx)("img",{src:h.picture,alt:h.name,className:"ms-3  img-topbar"}):Object(J.jsx)("img",{src:"./assets/default-user.png",alt:"default",className:"ms-3 img-topbar"}),Object(J.jsxs)("span",{className:"text-white fw-bold ms-3 text-resp",children:[h.name," ",Object(J.jsx)("i",{className:"fas fa-circle mx-2 text-online"})]})]}),Object(J.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[Object(J.jsx)(ee.a.button,{onClick:function(){return l(!0)},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(J.jsx)(X.a,{})}),a&&Object(J.jsx)(ee.a.button,{onClick:function(){return v(G())},whileTap:{scale:2.5},className:"button-info mr-1rem",children:Object(J.jsx)(z.a,{})})]})]}),Object(J.jsxs)("div",{className:"overflow-auto pt-4 bg-chat container-chat",children:[j&&Object(J.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(J.jsx)(de.a,{animation:"border",role:"status",variant:"primary"})}),O&&!j&&0===O.length&&Object(J.jsxs)("div",{className:"alert alert-warning text-center text-resp mx-alert",children:["A\xfan no tienes mensajes con ",Object(J.jsxs)("strong",{children:[null===h||void 0===h?void 0:h.name,"."]})]}),O&&O.map((function(e,t){var a=O.length-1===t;return e.recipient!==p?Object(J.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?w:null,children:Object(J.jsx)(ce,{text:e.message,date:e.date},t)},t):Object(J.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?w:null,children:Object(J.jsx)(se,{text:e.message,date:e.date},t)},t)}))]}),Object(J.jsx)("div",{id:"chat-input",children:Object(J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===s.current.value||t(s.current.value),s.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(J.jsx)("input",{ref:s,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(J.jsx)("button",{type:"submit",id:"message-submit",className:"bg-primary",children:Object(J.jsx)(X.c,{color:"#fff"})})]})})]}),Object(J.jsx)(oe,{handleClose:function(){return l(!1)},show:o,participants:[g,null===h||void 0===h?void 0:h.name]})]})},je=a(243),be=a.n(je),me=a(332),he=s.a.createContext();var xe=function(e){var t=e.children,a=Object(n.useState)(),s=Object(M.a)(a,2),c=s[0],r=s[1],o=Object(i.c)((function(e){return e.auth})),l=o.uid,d=o.name,u=o.picture,j=Object(i.c)((function(e){return e.dashboard})).selectedUser,b=Object(i.b)(),m=Object(n.useCallback)((function(e){var t=new Date,a=be()(t).format("LT");c.emit("send-message",{message:e,user:l,date:a})}),[c,l]),h=Object(n.useCallback)((function(e){var t=new Date,a=be()(t).format("LT");c.emit("send-private-message",[{message:e,date:a},{uid:j.uid,name:j.name}])}),[null===j||void 0===j?void 0:j.uid,null===j||void 0===j?void 0:j.name,c]);Object(n.useEffect)((function(){var e=Object(me.io)("https://room-chat-dan.herokuapp.com/",{query:{uid:l,name:d,picture:u}});return r(e),function(){return e.close()}}),[l,d,u]),Object(n.useEffect)((function(){if(c)return c.on("receive-messages",(function(e){b(q(e))})),function(){return c.off("receive-messages")}}),[c,b]),Object(n.useEffect)((function(){if(c)return c.on("created-message",(function(e){b(q(e))})),function(){return c.off("created-message")}}),[c,b]),Object(n.useEffect)((function(){if(c)return c.on("active-users",(function(e){b(function(e){return{type:N,payload:e}}(e))})),function(){return c.off("active-users")}}),[c,b]),Object(n.useEffect)((function(){if(c)return c.on("private-messages",(function(e){b(F(e))})),function(){return c.off("private-messages")}}),[c,b]),Object(n.useEffect)((function(){if(c)return c.on("registered-users",(function(e){b(function(e){return{type:C,payload:e}}(e))})),function(){return c.off("registered-users")}}),[c,b]),Object(n.useEffect)((function(){if(c)return c.on("get-stats",(function(e){b(function(e){return{type:_,payload:e}}(e))})),function(){return c.off("get-stats")}}),[c,b]);var x={sendMessage:m,sendPrivateMessage:h};return Object(J.jsx)(he.Provider,{value:x,children:t})},Oe=a(95),fe=function(){var e=Object(i.c)((function(e){return e.auth})).name,t=Object(n.useState)(window.screen.width),a=Object(M.a)(t,2),s=a[0],c=a[1],r=Object(i.c)((function(e){return e.dashboard})),o=r.selectedUser,l=r.showSidebar,d=Object(n.useContext)(he),u=d.sendMessage,j=d.sendPrivateMessage;return Object(n.useEffect)((function(){var e=function(e){c(e.target.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(Oe.a,{children:[Object(J.jsxs)("title",{children:[e," | ChatRoom"]}),Object(J.jsx)("meta",{name:"description",content:"Contenido principal del usuario y salas de chat"})]}),Object(J.jsx)("main",{children:Object(J.jsxs)("div",{id:"container-grid",children:[s>900&&Object(J.jsx)("div",{className:"p-0 aside-color",children:Object(J.jsx)(Z,{})}),s<=900&&Object(J.jsx)("div",{className:"p-0 aside-color aside-responsive ".concat(l&&"aside-responsive-show"),children:Object(J.jsx)(te,{})}),Object(J.jsx)("div",{className:"p-0 d-flex",children:Object(J.jsx)("div",{className:"d-flex column-chat-dimensions",id:"chat",children:(null===o||void 0===o?void 0:o.uid)&&(null===P||void 0===P?void 0:P.name)?Object(J.jsx)(ue,{sendPrivateMessage:j,showMenuButton:s<900}):Object(J.jsx)(le,{sendMessage:u,showMenuButton:s<900})})})]})})]})},pe=a(692),ge=a(693),ve=a(335),we=a(694),Ne=a(695),ke=a(352),ye=a(353),Ce=a(166),Se=a(161),Ie=a(364),_e=a(336),Te=function(){var e=Object(i.c)((function(e){return e.stats})).countMessages;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(Oe.a,{children:[Object(J.jsx)("title",{children:"Stats | ChatRoom"}),Object(J.jsx)("meta",{name:"description",content:"Estadisticas del chat general"})]}),Object(J.jsx)(pe.a,{fluid:!0,children:Object(J.jsx)(ge.a,{children:Object(J.jsx)(ve.a,{md:12,className:"p-0 bg-dark",children:Object(J.jsxs)("div",{className:"container-full",children:[Object(J.jsx)("div",{className:"px-3 py-2 bg-head-chat header-stats",children:Object(J.jsxs)(o.b,{className:"text-resp link-button px-3 fw-bold",to:"/",children:[Object(J.jsx)(_e.a,{})," Inicio"]})}),Object(J.jsx)("h3",{className:"text-resp text-white text-center mt-5",children:"Usuarios que m\xe1s mensajes han enviado"}),Object(J.jsx)("h4",{className:"text-resp text-info text-center mb-5",children:"En el chat general"}),Object(J.jsx)(we.a,{width:"90%",height:"50%",className:"text-resp",children:Object(J.jsxs)(Ne.a,{width:500,height:300,data:e,margin:{top:5,right:5,left:5,bottom:5},children:[Object(J.jsx)(ke.a,{dataKey:"name"}),Object(J.jsx)(ye.a,{}),Object(J.jsx)(Ce.a,{}),Object(J.jsx)(Se.a,{}),Object(J.jsx)(Ie.a,{dataKey:"messages",fill:"#8884d8"})]})})]})})})})]})},Ae=a(701),De=a(329),Ee=a(202),Be=a(83),Me=a(359),Re=a(360),Ue=function(){var e=Object(i.b)(),t=window.location.hostname.includes("localhost")?"http://localhost:5000/api/auth/google":"https://room-chat-dan.herokuapp.com/api/auth/google",a=function(){var a=Object(j.a)(u.a.mark((function a(n){var s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={id_token:n},fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var a=t.uid,n=t.name,s=t.email,c=t.google,r=t.picture,i=t.token;e(A({uid:a,name:n,email:s,google:c,picture:r})),localStorage.setItem("chat-token",i)})).catch(console.log);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),n=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokenId,e.next=3,a(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)("div",{children:Object(J.jsx)(Me.GoogleLogin,{clientId:"257430794857-ifhr62u2i59t0snq8a3q4gns6k8or9a6.apps.googleusercontent.com",buttonText:"Iniciar sesi\xf3n con Google",onSuccess:n,cookiePolicy:"single_host_origin",className:"mt-3 w-100 text-center",render:function(e){return Object(J.jsxs)(ee.a.div,{whileTap:{scale:1.1},onClick:e.onClick,disabled:e.disabled,className:"google-btn",children:[Object(J.jsx)("div",{className:"logo",children:Object(J.jsx)(Re.a,{size:"1.7rem"})}),Object(J.jsx)("div",{className:"l-text",children:"Ingresar con Google"})]})}})})},He=function(){var e=Object(i.b)(),t=Object(Ee.a)({initialValues:{email:"",password:""},validationSchema:Be.a({email:Be.b().email(!0).required(!0),password:Be.b().required(!0).min(8,!0)}),onSubmit:function(t){var a=t.email,n=t.password;e(function(e,t){return function(){var a=Object(j.a)(u.a.mark((function a(n){var s,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.post("".concat("https://room-chat-dan.herokuapp.com/api","/auth/login"),{email:e,password:t});case 2:s=a.sent,(c=s.data).ok?(localStorage.setItem("chat-token",c.token),n(A({uid:c.user.uid,name:c.user.name,email:c.user.email}))):x.a.fire("Error",c.msg,"error");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a,n))}});return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(Oe.a,{children:[Object(J.jsx)("meta",{charSet:"utf-8"}),Object(J.jsx)("title",{children:"Chat | Login"}),Object(J.jsx)("meta",{name:"description",content:"Inicio de sesi\xf3n"})]}),Object(J.jsx)(pe.a,{fluid:!0,className:"bg-dark d-flex justify-content-center align-items-center container-full",children:Object(J.jsx)("div",{className:"form",children:Object(J.jsxs)(Ae.a,{onSubmit:t.handleSubmit,className:"animate__animated animate__fadeIn",children:[Object(J.jsx)("h2",{className:"text-white text-start texto mb-0",children:"ChatRoom"}),Object(J.jsx)("p",{className:"text-muted text-end",children:"por Daniel D\xedaz"}),Object(J.jsx)("h4",{className:"text-white lead",children:"Inicio de sesi\xf3n"}),Object(J.jsx)(Ae.a.Group,{className:"mb-3",children:Object(J.jsx)(Ae.a.Control,{autoComplete:"off",name:"email",className:"bg-dark text-white",type:"email",placeholder:"Correo",value:t.values.email,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.email})}),Object(J.jsx)(Ae.a.Group,{children:Object(J.jsx)(Ae.a.Control,{name:"password",className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",value:t.values.password,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.password})}),Object(J.jsx)(De.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Ingresar"}),Object(J.jsx)(Ue,{}),Object(J.jsx)(o.b,{to:"/auth/register",className:"d-inline-block mt-3",children:"Si no tienes una cuenta"})]})})})]})},ze=function(){var e=Object(i.b)(),t=Object(Ee.a)({initialValues:{name:"",email:"",password:""},validationSchema:Be.a({name:Be.b().required(!0).min(3,!0),email:Be.b().email(!0).required(!0),password:Be.b().required(!0).min(8,!0)}),onSubmit:function(t){var a=t.name,n=t.email,s=t.password;e(function(e,t,a){return function(){var n=Object(j.a)(u.a.mark((function n(s){var c,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post("".concat("https://room-chat-dan.herokuapp.com/api","/auth/register"),{name:e,email:t,password:a});case 2:c=n.sent,(r=c.data).ok?(localStorage.setItem("chat-token",r.token),s(D()),s(A({uid:r.user.uid,name:r.user.name,email:r.user.email,picture:r.user.picture})),x.a.fire({position:"bottom-end",icon:"success",title:"Cuenta creada",showConfirmButton:!1,timer:1500})):x.a.fire("Error",r.msg,"error");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,n,s))}});return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(Oe.a,{children:[Object(J.jsx)("meta",{charSet:"utf-8"}),Object(J.jsx)("title",{children:"Chat | Register"}),Object(J.jsx)("meta",{name:"description",content:"Registro de nuevo usuario"})]}),Object(J.jsx)(pe.a,{fluid:!0,className:"bg-dark d-flex flex-column justify-content-center align-items-center container-full",children:Object(J.jsx)("div",{className:"form",children:Object(J.jsxs)(Ae.a,{onSubmit:t.handleSubmit,className:"animate__animated animate__fadeIn",children:[Object(J.jsx)("h2",{className:"text-white text-start texto mb-0",children:"ChatRoom"}),Object(J.jsx)("p",{className:"text-muted text-end",children:"por Daniel D\xedaz"}),Object(J.jsx)("h4",{className:"text-white lead mt-3",children:"Registro"}),Object(J.jsx)(Ae.a.Group,{className:"mb-3",children:Object(J.jsx)(Ae.a.Control,{autoComplete:"off",name:"name",className:"bg-dark text-white",type:"text",placeholder:"Nombre",value:t.values.name,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.name})}),Object(J.jsx)(Ae.a.Group,{className:"mb-3",children:Object(J.jsx)(Ae.a.Control,{autoComplete:"off",name:"email",className:"bg-dark text-white",type:"email",placeholder:"Correo",value:t.values.email,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.email})}),Object(J.jsx)(Ae.a.Group,{children:Object(J.jsx)(Ae.a.Control,{name:"password",className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",value:t.values.password,onChange:t.handleChange,onBlur:t.handleBlur,isInvalid:t.errors.password})}),Object(J.jsx)(De.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Registrarme"}),Object(J.jsx)(o.b,{to:"/auth/login",className:"d-inline-block mt-3",children:"Si ya tienes una cuenta"})]})})})]})},qe=function(){return Object(J.jsx)(o.a,{children:Object(J.jsxs)(l.d,{children:[Object(J.jsx)(l.b,{path:"/auth/login",component:He}),Object(J.jsx)(l.b,{path:"/auth/register",component:ze}),Object(J.jsx)(l.a,{to:"/auth/login"})]})})},Fe=a(22),Pe=a(201),Ge=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Pe.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(l.b,Object(Fe.a)(Object(Fe.a)({},n),{},{component:function(e){return t?Object(J.jsx)(a,Object(Fe.a)({},e)):Object(J.jsx)(l.a,{to:"/login"})}}))},Le=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Pe.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(l.b,Object(Fe.a)(Object(Fe.a)({},n),{},{component:function(e){return t?Object(J.jsx)(l.a,{to:"/"}):Object(J.jsx)(a,Object(Fe.a)({},e))}}))},Ve=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})),a=t.checking,s=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat("https://room-chat-dan.herokuapp.com/api","/auth/renew"),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}});case 2:a=e.sent,(n=a.data).ok?(localStorage.setItem("chat-token",n.token),t(A({uid:n.user.uid,name:n.user.name,email:n.user.email,picture:n.user.picture}))):t(E());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(J.jsx)("div",{className:"flexible",children:Object(J.jsxs)("div",{className:"sk-chase",children:[Object(J.jsx)("div",{className:"sk-chase-dot"}),Object(J.jsx)("div",{className:"sk-chase-dot"}),Object(J.jsx)("div",{className:"sk-chase-dot"}),Object(J.jsx)("div",{className:"sk-chase-dot"}),Object(J.jsx)("div",{className:"sk-chase-dot"}),Object(J.jsx)("div",{className:"sk-chase-dot"})]})}):Object(J.jsx)(xe,{children:Object(J.jsx)(o.a,{children:Object(J.jsxs)(l.d,{children:[Object(J.jsx)(Le,{isAuthenticated:!!s,path:"/auth",component:qe}),Object(J.jsx)(Ge,{isAuthenticated:!!s,exact:!0,path:"/",component:fe}),Object(J.jsx)(Ge,{isAuthenticated:!!s,path:"/stats",component:Te}),Object(J.jsx)(l.a,{to:"/auth/login"})]})})})},Je=a(165),Ke=a(361),We={checking:!0},Xe={messages:[],users:[],selectedUser:{},chatMessages:[],allUsers:[]},Qe={countMessages:[]},Ye="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Je.c,Ze=Object(Je.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Fe.a)(Object(Fe.a)({},e),{},{checking:!1},t.payload);case p:return{checking:!1};case O:return Object(Fe.a)(Object(Fe.a)({},e),{},{checking:!1});case g:return Object(Fe.a)(Object(Fe.a)({},e),{},{newUser:!0});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(Fe.a)(Object(Fe.a)({},e),{},{messages:(null===t||void 0===t?void 0:t.payload)?t.payload:[]});case N:return Object(Fe.a)(Object(Fe.a)({},e),{},{users:t.payload});case k:return{messages:[],users:[]};case y:return Object(Fe.a)(Object(Fe.a)({},e),{},{selectedUser:t.payload});case w:return Object(Fe.a)(Object(Fe.a)({},e),{},{chatMessages:t.payload});case C:return Object(Fe.a)(Object(Fe.a)({},e),{},{allUsers:t.payload});case S:return Object(Fe.a)(Object(Fe.a)({},e),{},{showSidebar:!0});case I:return Object(Fe.a)(Object(Fe.a)({},e),{},{showSidebar:!1});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(Fe.a)(Object(Fe.a)({},e),{},{countMessages:t.payload});case T:return{countMessages:[]};default:return e}}}),$e=Object(Je.d)(Ze,Ye(Object(Je.a)(Ke.a)));a(668),a(669);var et=function(){return Object(J.jsx)(i.a,{store:$e,children:Object(J.jsx)(Ve,{})})};a(670),a(671);r.a.render(Object(J.jsx)(et,{}),document.getElementById("root"))}},[[681,1,2]]]);
//# sourceMappingURL=main.84bdc62d.chunk.js.map